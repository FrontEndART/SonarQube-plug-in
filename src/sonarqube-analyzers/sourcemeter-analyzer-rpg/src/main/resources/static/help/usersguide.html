<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link href="data:text/css,%40import%20url%28data%3Atext%2Fcss%3B%20charset%3Dutf%2D8%3Bbase64%2CQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdPcGVuIFNhbnMnOwogIGZvbnQtc3R5bGU6IGl0YWxpYzsKICBmb250LXdlaWdodDogMzAwOwogIHNyYzogdXJsKGh0dHA6Ly9mb250cy5nc3RhdGljLmNvbS9zL29wZW5zYW5zL3YyMy9tZW1uWWFHczEyNk1pWnBCQS1VRlVLV3lWOWhySXFZLnR0ZikgZm9ybWF0KCd0cnVldHlwZScpOwp9CkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnT3BlbiBTYW5zJzsKICBmb250LXN0eWxlOiBpdGFsaWM7CiAgZm9udC13ZWlnaHQ6IDQwMDsKICBzcmM6IHVybChodHRwOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9vcGVuc2Fucy92MjMvbWVtNllhR3MxMjZNaVpwQkEtVUZVSzBaZGNnLnR0ZikgZm9ybWF0KCd0cnVldHlwZScpOwp9CkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnT3BlbiBTYW5zJzsKICBmb250LXN0eWxlOiBpdGFsaWM7CiAgZm9udC13ZWlnaHQ6IDYwMDsKICBzcmM6IHVybChodHRwOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9vcGVuc2Fucy92MjMvbWVtbllhR3MxMjZNaVpwQkEtVUZVS1hHVWRocklxWS50dGYpIGZvcm1hdCgndHJ1ZXR5cGUnKTsKfQpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ09wZW4gU2Fucyc7CiAgZm9udC1zdHlsZTogaXRhbGljOwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgc3JjOiB1cmwoaHR0cDovL2ZvbnRzLmdzdGF0aWMuY29tL3Mvb3BlbnNhbnMvdjIzL21lbW5ZYUdzMTI2TWlacEJBLVVGVUtXaVVOaHJJcVkudHRmKSBmb3JtYXQoJ3RydWV0eXBlJyk7Cn0KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdPcGVuIFNhbnMnOwogIGZvbnQtc3R5bGU6IGl0YWxpYzsKICBmb250LXdlaWdodDogODAwOwogIHNyYzogdXJsKGh0dHA6Ly9mb250cy5nc3RhdGljLmNvbS9zL29wZW5zYW5zL3YyMy9tZW1uWWFHczEyNk1pWnBCQS1VRlVLVy1VOWhySXFZLnR0ZikgZm9ybWF0KCd0cnVldHlwZScpOwp9CkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnT3BlbiBTYW5zJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDMwMDsKICBzcmM6IHVybChodHRwOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9vcGVuc2Fucy92MjMvbWVtNVlhR3MxMjZNaVpwQkEtVU5fcjhPVXVocy50dGYpIGZvcm1hdCgndHJ1ZXR5cGUnKTsKfQpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ09wZW4gU2Fucyc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgc3JjOiB1cmwoaHR0cDovL2ZvbnRzLmdzdGF0aWMuY29tL3Mvb3BlbnNhbnMvdjIzL21lbThZYUdzMTI2TWlacEJBLVVGVlowZS50dGYpIGZvcm1hdCgndHJ1ZXR5cGUnKTsKfQpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ09wZW4gU2Fucyc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA2MDA7CiAgc3JjOiB1cmwoaHR0cDovL2ZvbnRzLmdzdGF0aWMuY29tL3Mvb3BlbnNhbnMvdjIzL21lbTVZYUdzMTI2TWlacEJBLVVOaXJrT1V1aHMudHRmKSBmb3JtYXQoJ3RydWV0eXBlJyk7Cn0KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdPcGVuIFNhbnMnOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogNzAwOwogIHNyYzogdXJsKGh0dHA6Ly9mb250cy5nc3RhdGljLmNvbS9zL29wZW5zYW5zL3YyMy9tZW01WWFHczEyNk1pWnBCQS1VTjdyZ09VdWhzLnR0ZikgZm9ybWF0KCd0cnVldHlwZScpOwp9CkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnT3BlbiBTYW5zJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDgwMDsKICBzcmM6IHVybChodHRwOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9vcGVuc2Fucy92MjMvbWVtNVlhR3MxMjZNaVpwQkEtVU44cnNPVXVocy50dGYpIGZvcm1hdCgndHJ1ZXR5cGUnKTsKfQo%3D%29%3B%0A%0A%2A%20%7B%0A%09outline%3A%20none%20%21important%3B%0A%09margin%3A%200%3B%0A%09padding%3A%200%3B%0A%09border%3A%200px%20solid%3B%0A%7D%0A%0Ahtml%20%7B%0A%09border%3A%200%3B%0A%09font%2Dfamily%3A%20open%5Fsansregular%2C%20Arial%2C%20sans%2Dserif%3B%0A%09font%2Dsize%3A%2013px%3B%0A%09color%3A%20%23666%3B%0A%09margin%3A%200%3B%0A%09padding%3A%201em%3B%0A%09background%3A%20%23e8eaec%3B%0A%7D%0A%0Abody%20%7B%0A%09background%3A%20%23f9fbfc%3B%0A%09width%3A%201180px%3B%0A%09margin%3A%20auto%3B%0A%09padding%3A%202em%3B%0A%09%2Dmoz%2Dborder%2Dradius%3A%205px%3B%0A%09%2Dwebkit%2Dborder%2Dradius%3A%205px%3B%0A%09border%2Dradius%3A%205px%3B%0A%20%20%2Dwebkit%2Dbox%2Dshadow%3A%20%203px%203px%2010px%200px%20rgba%2889%2C%2089%2C%2089%2C%200%2E34%29%3B%0A%20%20%2Dmoz%2Dbox%2Dshadow%3A%20%20%20%20%203px%203px%2010px%200px%20rgba%2889%2C%2089%2C%2089%2C%200%2E34%29%3B%0A%20%20box%2Dshadow%3A%20%20%20%20%20%20%20%20%20%203px%203px%2010px%200px%20rgba%2889%2C%2089%2C%2089%2C%200%2E34%29%3B%0A%7D%0A%0Ah1%2C%20h2%2C%20h3%2C%20h4%2C%20h5%2C%20h6%20%7B%0A%09font%2Dfamily%3A%20open%5Fsanssemibold%3B%0A%09margin%3A%20%2E5em%200%3B%0A%09padding%3A%200%3B%0A%09%2F%2Acolor%3A%20%236DAB66%3B%2A%2F%0A%7D%0A%0Ah3%20%7B%0A%20%20font%2Dsize%3A%20150%25%3B%0A%7D%0A%0Ah3%2C%20h4%2C%20h5%2C%20h6%20%7B%0A%09margin%3A%20%2E5em%200%200%200%3B%0A%7D%0A%0Ah4%2C%20h5%2C%20h6%20%7B%0A%09font%2Dfamily%3A%20%22Open%20Sans%22%3B%0A%20%20font%2Dsize%3A%20105%25%3B%0A%20%20color%3A%20%236DAB66%3B%0A%20%20border%2Dbottom%3Adotted%202px%20%2324a700%3B%0A%20%20display%3A%20inline%2Dblock%3B%0A%7D%0A%0Ah4%3Aafter%2C%20h5%3Aafter%2C%20h6%3Aafter%20%7B%0A%20%20content%3A%20%22%5CA%22%3B%0A%20%20white%2Dspace%3A%20pre%3B%0A%7D%0A%0Aa%20%7B%0A%09text%2Ddecoration%3A%20none%3B%0A%09color%3A%20%2324a700%3B%0A%7D%0A%0Ainput%2C%20select%20%7B%0A%09font%2Dfamily%3A%20open%5Fsanslight%5Fitalic%2C%20Arial%2C%20sans%2Dserif%3B%0A%09font%2Dsize%3A%2012px%3B%0A%09outline%3A%200%20none%3B%0A%09resize%3A%20none%3B%0A%09margin%3A%200%3B%0A%7D%0A%0Aul%20%7B%0A%09list%2Dstyle%2Dtype%3A%20none%3B%0A%09padding%2Dleft%3A%202em%3B%0A%7D%0A%0Ali%20%7B%0A%09vertical%2Dalign%3A%20middle%3B%0A%09line%2Dheight%3A%20150%25%3B%0A%7D%0A%0Anav%23TOC%20%7B%0A%20%20%2F%2Atext%2Dalign%3A%20center%3B%2A%2F%0A%7D%0A%0Anav%23TOC%20%3E%20ul%20%7B%0A%20%20%2F%2Adisplay%3A%20inline%2Dblock%3B%2A%2F%0A%20%20text%2Dalign%3A%20left%3B%0A%20%20font%2Dsize%3A%201%2E5em%3B%0A%7D%0A%0Anav%23TOC%20ul%20%7B%0A%20%20margin%3A%200%3B%0A%7D%0A%0Anav%23TOC%20%3E%20ul%20ul%20%7B%0A%20%20font%2Dsize%3A%2075%25%3B%0A%7D%0A%0Anav%23TOC%20%3E%20ul%20li%20a%20%7B%0A%20%20border%2Dbottom%3A%20dotted%20%236DAB66%201px%3B%0A%20%20line%2Dheight%3A%20150%25%3B%0A%7D%0A%0Anav%23TOC%20%3E%20ul%20ul%20ul%20li%20a%20%7B%0A%20%20line%2Dheight%3A%20190%25%3B%0A%7D%0A%0Anav%23TOC%20%3E%20ul%20ul%20ul%20ul%20%7B%0A%20%20font%2Dsize%3A%20100%25%3B%0A%7D%0A%0Anav%23TOC%20%3E%20ul%20ul%20ul%20ul%20li%20a%20%7B%0A%20%20line%2Dheight%3A%20110%25%3B%0A%7D%0A%0A%0A%2Ered%20%7B%0A%09color%3A%20red%3B%0A%7D%0A%0A%2Egreen%20%7B%0A%09color%3A%20green%3B%0A%7D%0A%0Atable%2Efill%20%7B%0A%09width%3A%2095%25%3B%0A%7D%0A%0A%23container%20%7B%0A%09background%3A%20%23f9fbfc%3B%0A%09width%3A%20930px%3B%0A%09margin%3A%20auto%3B%0A%09padding%3A%202em%3B%0A%09%2Dmoz%2Dborder%2Dradius%3A%205px%3B%0A%09%2Dwebkit%2Dborder%2Dradius%3A%205px%3B%0A%09border%2Dradius%3A%205px%0A%7D%0A%0Atable%20%7B%0A%09background%3A%20%23ccc%3B%0A%09margin%3A%2020px%3B%0A%09border%3A%20%23ccc%201px%20solid%3B%0A%09%2Dmoz%2Dborder%2Dradius%3A%2010px%3B%0A%09%2Dwebkit%2Dborder%2Dradius%3A%2010px%3B%0A%09border%2Dradius%3A%2010px%0A%7D%0A%0Atable%20th%20%7B%0A%09padding%3A%204px%2010px%3B%0A%20%20text%2Dalign%3A%20center%3B%0A%09vertical%2Dalign%3A%20middle%3B%0A%09%2F%2Acolor%3A%23f9fcfc%3B%2A%2F%0A%09color%3A%20%23233%3B%0A%7D%0A%0Atable%2C%20tbody%2C%20tr%2C%20td%20%7B%0A%09vertical%2Dalign%3A%20inherit%3B%0A%09text%2Dalign%3A%20inherit%3B%0A%7D%0A%0Atable%20td%20%7B%0A%09background%3A%20%23F4F4F5%3B%0A%09padding%3A%204px%2010px%204px%2010px%3B%0A%09vertical%2Dalign%3A%20inherit%3B%0A%7D%0A%0A%2Emiddle%20%7B%0A%09vertical%2Dalign%3A%20middle%3B%0A%7D%0A%0A%2Ecenter%20%7B%0A%09text%2Dalign%3A%20center%3B%0A%7D%0A%0Atd%2Ename%20%7B%0A%09text%2Dalign%3A%20left%3B%0A%7D%0A%0Atd%2Epath%20%7B%0A%09text%2Dalign%3A%20left%3B%0A%7D%0A%0Atable%20tr%2Eeven%20td%20%7B%0A%09background%3A%20%23eee%0A%7D%0A%0Atable%20a%20%7B%0A%09display%3A%20block%3B%0A%7D%0A%0Atable%20tr%3Afirst%2Dchild%20td%3Afirst%2Dchild%20%7B%0A%09%2Dmoz%2Dborder%2Dradius%2Dtopleft%3A%205px%3B%0A%09%2Dwebkit%2Dborder%2Dtop%2Dleft%2Dradius%3A%205px%3B%0A%09border%2Dtop%2Dleft%2Dradius%3A%205px%3B%0A%7D%0A%0Atable%20tr%3Afirst%2Dchild%20td%3Alast%2Dchild%20%7B%0A%09%2Dmoz%2Dborder%2Dradius%2Dtopright%3A%205px%3B%0A%09%2Dwebkit%2Dborder%2Dtop%2Dright%2Dradius%3A%205px%3B%0A%09border%2Dtop%2Dright%2Dradius%3A%205px%3B%0A%7D%0A%0Atable%20tr%3Alast%2Dchild%20td%3Afirst%2Dchild%20%7B%0A%09%2Dmoz%2Dborder%2Dradius%2Dbottomleft%3A%205px%3B%0A%09%2Dwebkit%2Dborder%2Dbottom%2Dleft%2Dradius%3A%205px%3B%0A%09border%2Dbottom%2Dleft%2Dradius%3A%205px%3B%0A%7D%0A%0Atable%20tr%3Alast%2Dchild%20td%3Alast%2Dchild%20%7B%0A%09%2Dmoz%2Dborder%2Dradius%2Dbottomright%3A%205px%3B%0A%09%2Dwebkit%2Dborder%2Dbottom%2Dright%2Dradius%3A%205px%3B%0A%09border%2Dbottom%2Dright%2Dradius%3A%205px%3B%0A%7D%0A%0Atable%2Ecollapsed%20%7B%0A%09border%2Dcollapse%3A%20collapse%0A%7D%0A%0Aul%20%7B%0A%20%20%20%20list%2Dstyle%3Adisc%20outside%3B%0A%7D%0A%0Aol%5Btype%3D1%5D%20%7B%0A%20%20%20%20list%2Dstyle%2Dtype%3Adecimal%3B%0A%7D%0A%0Aol%5Btype%3Da%5D%20%7B%0A%20%20%20%20list%2Dstyle%2Dtype%3Alower%2Dalpha%3B%0A%7D%0A%0Aol%5Btype%3DA%5D%20%7B%0A%20%20%20%20list%2Dstyle%2Dtype%3Aupper%2Dalpha%3B%0A%7D%0A%0Aol%5Btype%3DI%5D%20%7B%0A%20%20%20%20list%2Dstyle%2Dtype%3Aupper%2Droman%3B%0A%7D%0A%0Aol%5Btype%3Di%5D%20%7B%0A%20%20%20%20list%2Dstyle%2Dtype%3Alower%2Droman%3B%0A%7D%0A%0Ap%20%7B%0A%20%20margin%3A%201em%200%3B%0A%7D%0A%0Ali%20p%3Aonly%2Dof%2Dtype%20%7B%0A%20%20margin%3A%200%3B%0A%7D%0A%0Ablockquote%2Cul%2Col%2Cdl%20%7B%0A%20%20%20%20margin%3A1em%202em%3B%0A%7D%0A%0Adl%20dd%20%7B%0A%20%20%20%20margin%2Dleft%3A1em%3B%0A%7D%0A%0Acaption%20%7B%0A%20%20%20%20margin%2Dbottom%3A%2E5em%3B%0A%20%20%20%20text%2Dalign%3Acenter%3B%0A%7D%0A%0Afieldset%2Cpre%20%7B%0A%20%20%20%20margin%2Dtop%3A%2E5em%3B%0A%20%20%20%20margin%2Dbottom%3A%2E5em%3B%0A%7D%0A%0Apre%2Ccode%2Ctt%20%7B%0A%20%20%20%20font%2Dfamily%3Amonospace%3B%0A%20%20%20%20font%2Dsize%3A108%25%3B%0A%20%20%20%20line%2Dheight%3A100%25%3B%0A%7D%0A%0Adl%20%7B%0A%20%20%20%20margin%3A0%200%201%2E125em%3B%0A%7D%0A%0Adt%20%7B%0A%20%20%20%20font%2Dweight%3A700%3B%0A%20%20%20%20line%2Dheight%3A1%2E125em%3B%0A%20%20%20%20font%2Dfamily%3A%20%22Open%20Sans%22%3B%0A%7D%0A%0Add%20%7B%0A%20%20%20%20margin%2Dleft%3A1em%3B%0A%20%20%20%20line%2Dheight%3A1%2E125em%3B%0A%7D%0A%0Add%20p%20%7B%0A%20%20margin%2Dtop%3A%20%2E3em%3B%0A%7D%0A%0Apre%20%7B%0A%20%20border%3A%202px%20dotted%20%23ddd%3B%0A%20%20%2Dwebkit%2Dborder%2Dradius%3A%204px%3B%0A%20%20%2Dmoz%2Dborder%2Dradius%3A%204px%3B%0A%20%20border%2Dradius%3A%204px%3B%0A%20%20padding%3A%201%2E5em%3B%0A%7D%0A%0Ahr%20%7B%0A%20%20border%2Dtop%3A%20%23ddd%20dotted%205px%3B%0A%0A%7D%0A%0Aimg%20%7B%0A%20%20margin%2Dleft%3A%20auto%3B%0A%20%20margin%2Dright%3A%20auto%3B%0A%20%20max%2Dwidth%3A%20%20100%25%3B%0A%20%20border%2Dstyle%3A%20solid%3B%0A%20%20border%2Dwidth%3A%202px%3B%0A%7D" rel="stylesheet">
</head>
<body>
<nav id="TOC">
<ul>
<li><a href="#sourcemeter-10.0-for-rpg">SourceMeter 10.0 for RPG</a></li>
<li><a href="#introduction">Introduction</a><ul>
<li><a href="#product-characteristics">Product characteristics</a></li>
<li><a href="#background">Background</a></li>
</ul></li>
<li><a href="#installation">Installation</a><ul>
<li><a href="#supported-platforms">Supported platforms</a></li>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#installation-package">Installation package</a></li>
<li><a href="#license-key">License key</a></li>
</ul></li>
<li><a href="#preconditions">Preconditions</a></li>
<li><a href="#command-line-parameters">Command line parameters</a></li>
<li><a href="#usage">Usage</a><ul>
<li><a href="#directory-analysis">Directory analysis</a></li>
</ul></li>
<li><a href="#result-files">Result files</a></li>
<li><a href="#coding-rule-violation-suppression">Coding rule violation suppression</a></li>
<li><a href="#demo">Demo</a></li>
<li><a href="#error-messages">Error messages</a></li>
<li><a href="#known-bugs-and-deficiencies">Known bugs and deficiencies</a></li>
<li><a href="#faq">FAQ</a></li>
<li><a href="#appendices">Appendices</a><ul>
<li><a href="#reference-of-source-code-metrics">Reference of source code metrics</a><ul>
<li><a href="#complexity-metrics">Complexity metrics</a></li>
<li><a href="#coupling-metrics">Coupling metrics</a></li>
<li><a href="#documentation-metrics">Documentation metrics</a></li>
<li><a href="#size-metrics">Size metrics</a></li>
</ul></li>
<li><a href="#reference-of-code-duplication-metrics">Reference of code duplication metrics</a><ul>
<li><a href="#clone-metrics">Clone metrics</a></li>
</ul></li>
<li><a href="#reference-of-faulthunter-coding-rule-violations">Reference of FaultHunter coding rule violations</a><ul>
<li><a href="#basic-rules">Basic Rules</a></li>
<li><a href="#design-rules">Design Rules</a></li>
<li><a href="#documentation-rules">Documentation Rules</a></li>
<li><a href="#naming-rules">Naming Rules</a></li>
<li><a href="#security-rules">Security Rules</a></li>
<li><a href="#size-rules">Size Rules</a></li>
<li><a href="#type-rules">Type Rules</a></li>
<li><a href="#unnecessary-and-unused-code-rules">Unnecessary and Unused Code Rules</a></li>
</ul></li>
<li><a href="#the-userdefinedmetrics-module">The UserDefinedMetrics module</a><ul>
<li><a href="#defining-a-metric">Defining a metric</a></li>
<li><a href="#example-profile.xml">Example profile.xml</a></li>
</ul></li>
<li><a href="#the-userdefinedpatterns-module">The UserDefinedPatterns module</a><ul>
<li><a href="#usage-1">Usage</a></li>
<li><a href="#an-example-pattern">An example pattern</a></li>
<li><a href="#the-declarative-method">The declarative method</a></li>
<li><a href="#declarative-reference">Declarative reference</a></li>
<li><a href="#a-more-complex-pattern">A more complex pattern</a></li>
<li><a href="#the-procedural-method">The procedural method</a></li>
<li><a href="#procedural-reference">Procedural reference</a></li>
<li><a href="#predefined-design-patterns">Predefined Design patterns</a></li>
<li><a href="#predefined-anti-patterns">Predefined Anti patterns</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 id="sourcemeter-10.0-for-rpg">SourceMeter 10.0 for RPG</h1>
<h1 id="introduction">Introduction</h1>
<p>FrontEndART SourceMeter for RPG is a source code analyzer tool, which can perform deep static analysis of the source code of complex RPG systems (<a href="https://www.sourcemeter.com" class="uri">https://www.sourcemeter.com</a>).</p>
<p>The source code of a program is usually its only up-to-date documentation. At the same time, the source code is the exquisite bearer of knowledge, business processes and methodology, accumulated over a long period of time. Source code quality decrease, which happens due to many quick fixes and time pressure, results in the increase of development and testing costs, and operational risks. In spite of this, the source code usually receives hostile treatment and is merely considered as a tool.</p>
<p>FrontEndART has developed SourceMeter based on the Columbus technology researched and developed at the <a href="http://www.sed.inf.u-szeged.hu/softwarequality">Department of Software Engineering</a> of the University of Szeged. SourceMeter provides deep static analysis of source code. Using the results of the analysis, the quality of the analyzed source code can be improved and developed both in the short- and long term in a directed way.</p>
<p>The free version of SourceMeter for RPG features 10 source code metrics and the metric threshold violations checker (MetricHunter module).</p>
<h2 id="product-characteristics">Product characteristics</h2>
<p>The most important product characteristics of FrontEndART SourceMeter are the following:</p>
<ul>
<li><p>Platform-independent command line tools</p></li>
<li><p>Transparent integration into build processes</p></li>
<li><p>Powerful filter management</p></li>
<li><p>Coding issue detection:</p>
<ul>
<li><p>Common programming mistakes (FaultHunter module)</p></li>
<li><p>Metric threshold violations (MetricHunter module)</p></li>
<li><p><a href="https://www.sonarqube.org">SONARQUBE™</a> platform 8.0 (“SonarQube” in the following) coding rule violations</p></li>
</ul></li>
<li><p>Clone detection (copy-pasted source code fragments) extended with clone tracking and “clone smells”</p>
<ul>
<li>Syntax-based, so-called Type-2 clones</li>
</ul></li>
<li><p>Metrics calculation at system, program, procedure, and subroutine levels:</p>
<ul>
<li><p>Source code metrics</p></li>
<li><p>Clone metrics</p></li>
<li><p>Coding rule violation metrics</p></li>
</ul></li>
</ul>
<p>By continuous static analysis, the software developers can:</p>
<ul>
<li><p>reduce the software erosion rate and this way decrease development costs;</p></li>
<li><p>coding problems can be identified before testing, so the number of test iterations and the testing costs can be reduced;</p></li>
<li><p>the number of errors in delivered software can be reduced, so the operational risks can be decreased, increasing the company’s reputation.</p></li>
</ul>
<p>SourceMeter can analyze source code conforming to RPG III and RPG IV versions (including free-form as well). Two kinds of inputs are supported: It can be specified either as raw source code or as compiler listing. In case of using raw source code as input, the analyzer might not be able to calculate some code metrics or detect various rule violations because the raw source contains less information than the compiler listing. For instance, cross references are detected with the help of compiler listing entries. So, it is highly recommended to use compiler listings as input to get fully detailed analysis results. For constructing RPG compiler listing files, use the RPG compiler version V6R1M0.</p>
<p>Visit our corporate website at <a href="http://www.frontendart.com" class="uri">http://www.frontendart.com</a> to find the latest information about SourceMeter and read more about related products and services. Note, that if you are using only the free features of SourceMeter, we do not provide any free support for it. However, FrontEndART offers support services, so please feel free to search for solutions to your problems on our website and contact us with any questions you might have. We welcome feedback about the usability and eventual issues of the tool and further development suggestions at <script type="text/javascript">
<!--
h='&#102;&#114;&#x6f;&#110;&#116;&#x65;&#110;&#100;&#x61;&#114;&#116;&#46;&#x63;&#x6f;&#x6d;&#x3f;&#x73;&#x75;&#98;&#106;&#x65;&#x63;&#116;&#x3d;&#x53;&#x6f;&#x75;&#114;&#x63;&#x65;&#x4d;&#x65;&#116;&#x65;&#114;';a='&#64;';n='&#x73;&#x75;&#112;&#112;&#x6f;&#114;&#116;';e=n+a+h;
document.write('<a h'+'ref'+'="ma'+'ilto'+':'+e+'" clas'+'s="em' + 'ail">'+'support@frontendart.com'+'<\/'+'a'+'>');
// -->
</script><noscript>support@frontendart.com (support at frontendart dot com?subject=SourceMeter)</noscript>.</p>
<h2 id="background">Background</h2>
<p>During the static analysis, an Abstract Semantic Graph (ASG) is constructed from the language elements of the source code. This ASG is then processed by the different tools in the package to calculate product metrics, identify copy-pasted code (clones), coding rule violations, etc.</p>
<h1 id="installation">Installation</h1>
<h2 id="supported-platforms">Supported platforms</h2>
<p>SourceMeter supports the following x64 platforms:</p>
<ul>
<li><p>Microsoft Windows 7, 8, 8.1, and 10</p></li>
<li><p>Microsoft Windows 2008 R2 Server</p></li>
<li><p>Microsoft Windows 2012 Server</p></li>
<li><p>GNU/Linux with kernel version 2.6.18 and GNU C library 2.11 or newer</p></li>
</ul>
<h2 id="requirements">Requirements</h2>
<p>In case of Windows, the Microsoft Visual C++ 2017 Redistributable Package must be installed. It can be downloaded from the following URL:</p>
<ul>
<li><a href="https://aka.ms/vs/15/release/vc_redist.x64.exe" class="uri">https://aka.ms/vs/15/release/vc_redist.x64.exe</a> (x64)</li>
</ul>
<p>The Linux package uses the code page conversion functions of the GNU C Library. If the conversion modules are not in the standard /usr/lib/gconv directory then the GCONV_PATH environment variable must be set according to the current installation of the GNU C Library.</p>
<p>E.g.:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">export</span> <span class="st">&quot;GCONV_PATH=/usr/lib/x86_64-linux-gnu/gconv&quot;</span></code></pre>
<h2 id="installation-package">Installation package</h2>
<p>The SourceMeter installation package can be extracted into any folder and used from that location. It can be executed with the command line program SourceMeterRPG.</p>
<p>The SourceMeter for RPG package contains the following directories and files:</p>
<p>Windows:</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;">SourceMeter\</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Demo</td>
<td style="text-align: left;"># Example project directory</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Tools</td>
<td style="text-align: left;"># ASG checker and exporter tools directory</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">SourceMeterRPG.exe</td>
<td style="text-align: left;"># Program file to execute the analysis</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">UsersGuide.html</td>
<td style="text-align: left;"># User’s guide</td>
</tr>
</tbody>
</table>
<p>Linux:</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;">SourceMeter/</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Demo</td>
<td style="text-align: left;"># Example project directory</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Tools</td>
<td style="text-align: left;"># ASG checker and exporter tools directory</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">SourceMeterRPG</td>
<td style="text-align: left;"># Program file to execute the analysis</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">UsersGuide.html</td>
<td style="text-align: left;"># User’s guide</td>
</tr>
</tbody>
</table>
<h2 id="license-key">License key</h2>
<p>The free version of SourceMeter does not require any license key file.</p>
<p>In order to use the commercial version of SourceMeter with all features, it is necessary to obtain the license key file named LICENSE.DAT.</p>
<p>Windows:</p>
<p>The license key file must be copied into the root directory of the extracted package (next to the readme.txt file) or into the %APPDATA%\FrontEndART\SourceMeter\ directory of the user.</p>
<p>Linux:</p>
<p>The license key file must be copied into the root directory of the extracted package (next to the readme.txt file) or into the $HOME/.FrontEndART/SourceMeter/ directory of the user.</p>
<p>In case of the first option, anyone who has permissions to access and execute the binaries of the package will be able to use SourceMeter, while in case of the second option only those users will be able to use SourceMeter, who have the license key file in the above-mentioned directory. If one would like to renew an expired license key, the already existing license key file must be replaced with the new one in the above-mentioned directories. To use SourceMeter it is also necessary to have read and write permission on the license key file.</p>
<h1 id="preconditions">Preconditions</h1>
<p>The analysis can be performed on both raw source codes and compiler listings. The only requirement is the following:</p>
<ul>
<li><p>Different types (raw source or compiler listing) and versions (RPG III or RPG IV) of source code should have different extensions. These extensions should be provided to the analyzer (See rpg3filenamepattern, rpg4filenamepattern, and spoolfilenamepattern command line parameters below).</p></li>
<li><p>Source files should use ISO 8859-1 character encoding. Using other character encoding may cause error.</p></li>
</ul>
<h1 id="command-line-parameters">Command line parameters</h1>
<p>SourceMeter can be executed with the following parameters:</p>
<dl>
<dt><strong>-help</strong></dt>
<dd><p>It displays the detailed help and exits.</p>
</dd>
<dt><strong>-resultsDir</strong></dt>
<dd><p>Relative or absolute path name of the directory where the results of the analysis will be stored. The directory will be created automatically if it does not exist.</p>
</dd>
<dt><strong>-projectName</strong></dt>
<dd><p>The name of the analyzed software system. The name specified here will be used for storing the results.</p>
</dd>
<dt><strong>-projectBaseDir</strong></dt>
<dd><p>Directory of the source code to be analyzed specified with relative or absolute path.</p>
</dd>
<dt><strong>-externalHardFilter</strong></dt>
<dd><p>Filter file specified with relative or absolute path, to filter out certain files from the analysis based on their path names. Filtered files will not appear in the results. The filter file is a simple text file containing lines starting with ‘+’ or ‘-’ characters followed by a regular expression<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>. Tip: you can use the and anchors to make a substring literal, reducing the need of escaping backslashes. During the analysis, each input file will be checked for these expressions. If the first character of the last matching expression is ‘-’, then the given file will be excluded from the analysis. If the first character of the last matching expression is ‘+’, or there is no matching expression, then the file will be analyzed. A line starting with a different character than ‘-’ or ‘+’ will be ignored. On Windows the checking is case-insensitive. Example filter file content:</p>
<pre><code># Filter out all source files starting with &quot;test&quot;:
-test[^\.]*.txt
# But test576.txt is needed:
+test576.txt
# Furthermore, files beginning with &quot;test1742&quot; are also needed:
+test1742[^\.]*.txt
# Finally, test1742_b.txt is not needed:
-test1742_b.txt</code></pre>
</dd>
<dt><strong>-runMetricHunter</strong></dt>
<dd><p>This parameter turns on or off the MetricHunter module. With this feature, SourceMeter lists metric threshold violations. Its value can be “true” (turn this feature on) or “false” (turn this feature off). The default value is “true”.</p>
</dd>
<dt><strong>-runFaultHunter</strong></dt>
<dd><p>This parameter turns on or off the FaultHunter module. With this feature, SourceMeter identifies common RPG coding rule violations (so-called bad practices) in the code. Its value can be “true” (turn this feature on) or “false” (turn this feature off). The default value is “true”.</p>
</dd>
<dt><strong>-runDCF</strong></dt>
<dd><p>This parameter turns on or off the DuplicatedCodeFinder module. With this feature, SourceMeter identifies copy-pasted code fragments. Its value can be “true” (turn this feature on) or “false” (turn this feature off). The default value is “true”.</p>
</dd>
<dt><strong>-runMET</strong></dt>
<dd><p>This parameter turns on or off the Metric module. With this feature, SourceMeter computes source code metrics. Its value can be “true” (turn this feature on) or “false” (turn this feature off). The default value is “true”.</p>
</dd>
<dt><strong>-profileXML</strong></dt>
<dd><p>Global configuration file for SourceMeter. Its <em>tool-options</em> tag can be used to override the default metric thresholds for the MetricHunter tool or define custom metric formulas for the UserDefinedMetrics tool. Furthermore, its <em>rule-options</em> tag can enable/disable or modify the priorities of multiple rules. An example profile xml file is shown below:</p>
</dd>
</dl>
<pre class="sourceCode xml"><code class="sourceCode xml">      <span class="kw">&lt;sourcemeter-profile&gt;</span>
        <span class="kw">&lt;tool-options&gt;</span>
          <span class="kw">&lt;tool</span><span class="ot"> name</span> <span class="ot">=</span> <span class="st">&quot;MetricHunter&quot;</span><span class="ot"> enabled</span> <span class="ot">=</span> <span class="st">&quot;true&quot;</span><span class="kw">&gt;</span>
              <span class="kw">&lt;metric-thresholds&gt;</span>
                  <span class="kw">&lt;threshold</span><span class="ot"> metric-id=</span><span class="st">&quot;LOC&quot;</span><span class="ot"> relation=</span><span class="st">&quot;gt&quot;</span><span class="ot"> value=</span><span class="st">&quot;100&quot;</span><span class="ot"> entity=</span><span class="st">&quot;Method&quot;</span> <span class="kw">/&gt;</span>
                  <span class="kw">&lt;threshold</span><span class="ot"> metric-id=</span><span class="st">&quot;LLOC&quot;</span><span class="ot"> relation=</span><span class="st">&quot;gt&quot;</span><span class="ot"> value=</span><span class="st">&quot;none&quot;</span><span class="ot"> entity=</span><span class="st">&quot;Method&quot;</span> <span class="kw">/&gt;</span>
                  <span class="kw">&lt;threshold</span><span class="ot"> metric-id=</span><span class="st">&quot;NUMPAR&quot;</span><span class="ot"> relation=</span><span class="st">&quot;gt&quot;</span><span class="ot"> value=</span><span class="st">&quot;43&quot;</span><span class="ot"> entity=</span><span class="st">&quot;Method&quot;</span> <span class="kw">/&gt;</span>
                  <span class="kw">&lt;threshold</span><span class="ot"> metric-id=</span><span class="st">&quot;TLOC&quot;</span><span class="ot"> relation=</span><span class="st">&quot;gt&quot;</span><span class="ot"> value=</span><span class="st">&quot;-32&quot;</span><span class="ot"> entity=</span><span class="st">&quot;Method&quot;</span> <span class="kw">/&gt;</span>
              <span class="kw">&lt;/metric-thresholds&gt;</span>
          <span class="kw">&lt;/tool&gt;</span>
        <span class="kw">&lt;/tool-options&gt;</span>

        <span class="kw">&lt;rule-options&gt;</span>
          <span class="kw">&lt;rule</span><span class="ot"> id=</span><span class="st">&quot;ISNUI&quot;</span><span class="ot"> name=</span><span class="st">&quot;If Should Not Use Indicators&quot;</span><span class="ot"> priority=</span><span class="st">&quot;Major&quot;</span><span class="ot"> enabled=</span><span class="st">&quot;false&quot;</span><span class="kw">/&gt;</span>
          <span class="kw">&lt;rule</span><span class="ot"> id=</span><span class="st">&quot;FPN&quot;</span><span class="ot"> name=</span><span class="st">&quot;File uses prefixed name&quot;</span><span class="ot"> priority=</span><span class="st">&quot;Critical&quot;</span><span class="ot"> enabled=</span><span class="st">&quot;true&quot;</span><span class="kw">/&gt;</span>
        <span class="kw">&lt;/rule-options&gt;</span>
      <span class="kw">&lt;/sourcemeter-profile&gt;</span>
</code></pre>
<dl>
<dt><strong>-runUDM</strong></dt>
<dd><p>This parameter turns on or off the UserDefinedMetrics module. With this feature, SourceMeter computes custom source code metrics based on other, previously computed metrics. Its value can be “true” (turn this feature on) or “false” (turn this feature off). The default value is dependent on the presence of custom metric definitions in the profile xml.</p>
</dd>
<dt><strong>-cloneGenealogy</strong></dt>
<dd><p>This parameter turns on or off the tracking of code clones (copy-pasted source code fragments) through the consecutive revisions of the software system. It is required that during the analysis of the different revisions, the values set to projectName and resultsDir remain the same, so SourceMeter will handle them as different revisions of the same system. Its value can be “true” (turn this feature on) or “false” (turn this feature off). The default value is “false”.</p>
</dd>
<dt><strong>-cloneMinLines</strong></dt>
<dd><p>This parameter sets the minimum required size of each duplication in lines of code. The default value is 10.</p>
</dd>
<dt><strong>-csvSeparator</strong></dt>
<dd><p>This parameter sets the separator character in the CSV outputs. The default value is the comma (“,”). The character set here must be placed in quotation marks (e.g. -csvSeparator=“;”). Tabulator character can be set by the special “\t” value.</p>
</dd>
<dt><strong>-csvDecimalMark</strong></dt>
<dd><p>This parameter sets the decimal mark character in the CSV outputs. The default is value is the dot (“.”). The character set here must be placed in quotation marks (e.g. -csvDecimalMark=“,”).</p>
</dd>
<dt><strong>-sarifseverity</strong></dt>
<dd><p>This parameter sets the severity levels to be saved in the SARIF output. (1 - Info, 2 - Minor, 3 - Major, 4 - Critical, 5 - Blocker, c/C - CloneClass). The value should not be placed in quotation marks (e.g. -sarifseverity=2345c). The default value is 2345c.</p>
</dd>
<dt><strong>-maximumThreads</strong></dt>
<dd><p>This parameter sets the maximum number of parallel tasks the controller can start. The default value is the number of available CPU cores on the current system.</p>
</dd>
<dt><strong>-currentDate</strong></dt>
<dd><p>The name of the directory with date inside the result directory of the project. If it is not set, then the current date is used.</p>
</dd>
<dt><strong>-cleanResults</strong></dt>
<dd><p>Cleans all but the last n number of timestamped result directory of the current project.</p>
</dd>
<dt><strong>-spoolFileNamePattern</strong></dt>
<dd><p>File name pattern for spool (compiler listing) files. (E.g. “.*\.txt“)</p>
</dd>
<dt><strong>-rpg3FileNamePattern</strong></dt>
<dd><p>File name pattern for RPG/400 files containing raw source code. (E.g. “.*\.rpg“)</p>
</dd>
<dt><strong>-rpg4FileNamePattern</strong></dt>
<dd><p>File name pattern for ILE RPG files containing raw source code. (E.g. “.*\.rpgle“)</p>
</dd>
<dt><strong>-runSQ</strong></dt>
<dd><p>Import issues from SonarQube server.</p>
</dd>
<dt><strong>-SQHost</strong></dt>
<dd><p>The URL address of the SonarQube server.</p>
</dd>
<dt><strong>-SQPort</strong></dt>
<dd><p>The port of the SonarQube server.</p>
</dd>
<dt><strong>-SQProjectKey</strong></dt>
<dd><p>The key of the project in the SonarQube server.</p>
</dd>
<dt><strong>-SQProjectPrefix</strong></dt>
<dd><p>Prefix path of the project’s base directory (the path of the sonar-project.properties file).</p>
</dd>
<dt><strong>-SQUserName</strong></dt>
<dd><p>The user name for the SonarQube server.</p>
</dd>
<dt><strong>-SQPassword</strong></dt>
<dd><p>The password for the SonarQube server.</p>
</dd>
<dt><strong>-SQLanguageKey</strong></dt>
<dd><p>The key of the language in SonarQube.</p>
</dd>
<dt><strong>-runLIM2Patterns</strong></dt>
<dd><p>This parameter can be used to enable or disable the LIM2Patterns module during analysis (default = on).</p>
</dd>
<dt><strong>-pattern</strong></dt>
<dd><p>The pattern file or pattern directory for LIM2Patterns. By default it searches for the predefined Anti Patterns found in Tools/Patterns/AntiPatterns.</p>
</dd>
</dl>
<h1 id="usage">Usage</h1>
<p>There are two ways to use SourceMeter. It can be used by simply invoking it on the directory, which contains the source files, or by using only one file as an input. Analyzing a file and a directory is very similar, so we discuss only the analysis of a directory. Main differences will be highlighted in the text below.</p>
<h2 id="directory-analysis">Directory analysis</h2>
<p>Execute the following command to analyze the source code of a software system:</p>
<p>Example (Windows):</p>
<pre><code>//raw RPG IV source code located in projectDir with extension 'rpgle'
//and compiler listings with 'txt'
SourceMeterRPG.exe
  -projectBaseDir=MyProjectDir
  -resultsDir=Results
  -projectName=MyProject
  -rpg4FileNamePattern=.*\.rpgle
  -spoolFileNamePattern=.*\.txt</code></pre>
<p>Example (Linux):</p>
<pre><code>//raw RPG IV source codes located in projectDir with extensions 'rpgle'
//and compiler listings with 'txt'
SourceMeterRPG
  -projectBaseDir=MyProjectDir
  -resultsDir=Results
  -projectName=MyProject
  -rpg4FileNamePattern=.*\.rpgle
  -spoolFileNamePattern=.*\.txt</code></pre>
<p>If a directory contains various types of files, the analyzer will select different types based on the given extension patterns. So, a directory can contain raw RPG source files with different versions and compiler listings.</p>
<h1 id="result-files">Result files</h1>
<p>If any problems occur in the execution of the tools of the SourceMeter package during the code analysis, SourceMeter returns with error code 1. The error code of the given tool appears on the screen (detailed information on the bug can be found in the log directory), and the analysis is stopped, but the result files created until the failure are not deleted.</p>
<p>An error-free execution of SourceMeter produces the following files:</p>
<ul>
<li><p>Files containing the results of the static analysis in the results directory (set by the resultsDir parameter):</p>
<ul>
<li><p>$(projectName)\rpg\$(DATE)\$(projectName)-*.csv</p>
<p>CSV (comma separated values) files containing different metrics: System, Program, Procedure, and Subroutine level source code metrics, rule violation counts, and clone-related metrics at CloneClass and CloneInstance level.</p></li>
<li><p>$(projectName)\rpg\$(DATE)\$(projectName)-clones.txt</p>
<p>List of the code clones (copy-pasted source code fragments) in the system.</p></li>
<li><p>$(projectName)\rpg\$(DATE)\$(projectName)-MetricHunter.txt</p>
<p>List of the MetricHunter metric value violations in the system.</p></li>
<li><p>$(projectName)\rpg\$(DATE)\$(projectName)-FaultHunter.txt</p>
<p>List of the FaultHunter coding rule violations in the system.</p></li>
<li><p>$(projectName)\rpg\$(DATE)\$(projectName).graph</p>
<p>Binary representation of the result graph containing all the metrics, code clones and coding rule violations.</p></li>
<li><p>$(projectName)\rpg\$(DATE)\$(projectName).xml</p>
<p>XML representation of the result graph containing all the metrics, code clones and coding rule violations.</p></li>
<li><p>$(projectName)\rpg\$(projectName).gsi</p>
<p>Binary data file containing information for tracking the code clones through the consecutive revisions of the analyzed software system.</p></li>
<li><p>$(projectName)\rpg\$(DATE)\$(projectName).sarif</p>
<p>SARIF representation of the rule violations.</p></li>
<li><p>$(projectName)\rpg\$(DATE)\$(projectName)-summary.graph</p>
<p>Binary representation of the summary result graph containing only the System component node.</p></li>
<li><p>$(projectName)\rpg\$(DATE)\$(projectName)-summary.xml</p>
<p>XML representation of the summary result graph containing only the System component node.</p></li>
<li><p>$(projectName)\rpg\$(DATE)\$(projectName)-summary.json</p>
<p>JSON representation of the summary result graph containing only the System component node.</p></li>
</ul></li>
<li><p>Other files and directories created in the results directory:</p>
<ul>
<li><p>$(projectName)\rpg\$(DATE)\sourcemeter</p>
<p>Directory, which contains configuration, binary, ASG, log, and temporary files created during the source code analysis.</p></li>
<li><p>$(projectName)\rpg\$(DATE)\sourcemeter\asg</p>
<p>Directory, which contains backup copies of the linked ASG and LIM files, the corresponding filter files, and the GSI file.</p></li>
<li><p>$(projectName)\rpg\$(DATE)\sourcemeter\graph</p>
<p>Directory, which contains backup copies of the graph files.</p></li>
<li><p>$(projectName)\rpg\$(DATE)\sourcemeter\log</p>
<p>Directory, which contains the log files created during the code analysis.</p></li>
<li><p>$(projectName)\rpg\$(DATE)\sourcemeter\temp</p>
<p>Directory, which contains the temporary files created during the code analysis.</p></li>
<li><p>$(projectName)\rpg\$(DATE)\sourcemeter\source</p>
<p>Directory, which contains the raw source code extracted from the spool files during the code analysis.</p></li>
</ul></li>
</ul>
<h1 id="coding-rule-violation-suppression">Coding rule violation suppression</h1>
<p>The warnings issued by the rule checker modules can be suppressed in case they are found to be invalid or for any other reason. SourceMeter supports different ways based on the version and context of the analyzed code.</p>
<ul>
<li>When analyzing RPG III (RPG/400) code, warnings can be suppressed by inserting “NOSM” anywhere between column 75 and 80 in the same line where suppression is desired.</li>
<li>When analyzing RPG IV (ILE RPG) code, warnings can be suppressed by inserting “NOSM” anywhere between column 81 and 100 in the same line where suppression is desired.</li>
<li>When analyzing RPG IV free-form code, warnings can be suppressed by inserting the “NOSM” comment in the same line the user want to suppress warnings.</li>
</ul>
<p>In RPG III and IV the following entries can handle “NOSM” comments:</p>
<ul>
<li>Control Specifications</li>
<li>File Description Specification</li>
<li>File Description Specification ContinuationLine</li>
<li>Extension Specification</li>
<li>Line Counter Specification</li>
<li>Input Program Record</li>
<li>Input Program Field</li>
<li>Input External Record</li>
<li>Input External Field</li>
<li>Input Data Structure</li>
<li>Input Data Structure Subfield</li>
<li>Output Program Record</li>
<li>Output Program Field</li>
<li>Output External Record</li>
<li>Output External Field</li>
<li>Calculation Specification</li>
<li>Calculation Specification Extended Factor2 ContinuationLine</li>
<li>Definition Specification</li>
<li>Keyword Continuation Line</li>
<li>Name Continuation Line</li>
<li>Procedure Specification</li>
<li>Eject Directive</li>
<li>Space Directive</li>
<li>Copy Directive</li>
<li>Include Directive</li>
<li>Free Directive</li>
<li>End Free Directive</li>
</ul>
<p>Furthermore, there are rules that check comments from different aspects, consequently “NOSM” inserted anywhere in RPG-style comments (asterisk inserted in column 7) suppresses warnings for the comment line itself.</p>
<p>Example (RPG/400):</p>
<pre class="rpg"><code>     C* NOSM
     C           EOF       TAG                                            NOSM</code></pre>
<p>In this example the TAG operation code would cause a “Forbidden operation” warning. However, from column 75 “NOSM” string was inserted (comment section), thus no warning is generated. The first line containing a comment “NOSM” will be applied on the comment itself not on the next line (comment is bound to the Calculation Specification line).</p>
<p>Example (RPG IV):</p>
<pre class="rpg"><code>     DEnvRecLen        S              9B 0 INZ(1024)                             NOSM</code></pre>
<p>In this example a simple RPG IV Definition Specification line is given. The “EnvRecLen” variable name is too long. The inserted NOSM prevents this warning to be risen.</p>
<p>Example (RPG IV free-form):</p>
<pre class="rpg"><code>    /free
           acq foo;     //NOSM
           return result;
    /end-free</code></pre>
<p>In this example “acq” is a forbidden operation that would have risen a warning if the “NOSM” comment has not been added.</p>
<p>The warnings of the MetricHunter module cannot be suppressed at the moment.</p>
<h1 id="demo">Demo</h1>
<p>The Demo directory of the installation package contains the analyzer script for the analysis of an example project. Three sample source codes are placed in the Demo directory, from which two can also be downloaded from the following URLs:</p>
<p><a href="http://www-03.ibm.com/systems/power/software/i/http/examples/ile-rpg.html">Sample Source code containing ILE RPG source</a></p>
<p><a href="http://www-01.ibm.com/support/knowledgecenter/ssw_i5_54/dbp/rbaforzahftrj.htm?lang=en">Sample Source code containing RPG/400 source</a></p>
<p>To perform the analysis of the demo source code files, the startDemo.bat/startDemo.sh script has to be executed.</p>
<p>Contents of the Demo directory:</p>
<p>Windows:</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;">Demo\</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">instrg.rpg</td>
<td style="text-align: left;"># source code of an RPG/400 program</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">samplerpg.rpgle</td>
<td style="text-align: left;"># source code of an ILE RPG program</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">cldemo.txt</td>
<td style="text-align: left;"># compiler listing of an ILE RPG program</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">startDemo.bat</td>
<td style="text-align: left;"># runs SourceMeter for RPG on the samples</td>
</tr>
</tbody>
</table>
<p>Linux:</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;">Demo/</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">instrg.rpg</td>
<td style="text-align: left;"># source code of an RPG/400 program</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">samplerpg.rpgle</td>
<td style="text-align: left;"># source code of an ILE RPG program</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">cldemo.txt</td>
<td style="text-align: left;"># compiler listing of an ILE RPG program</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">startDemo.sh</td>
<td style="text-align: left;"># runs SourceMeter for RPG on the samples</td>
</tr>
</tbody>
</table>
<h1 id="error-messages">Error messages</h1>
<ul>
<li><p>Message: There is no valid license!</p>
<p>Solution: Install a valid license key file (see Installation section).</p></li>
<li><p>Message: Please set the resultsDir parameter. Under this directory a new directory with the name of the analyzed project will be created, if it does not exist yet. All results will be stored there under separate directories with their names containing the date and time.</p>
<p>Solution: The resultsDir parameter must be set.</p></li>
<li><p>Message: Please set the projectName parameter to the name of the analyzed software system.</p>
<p>Solution: The projectName parameter must be set.</p></li>
<li><p>Message: Please set the projectBaseDir parameter. This is the directory that contains the source files you analyze.</p>
<p>Solution: The projectBaseDir parameter must be set.</p></li>
<li><p>Message: The directory given in the projectBaseDir parameter does not exist.</p>
<p>Solution: Specify a valid projectBaseDir parameter.</p></li>
<li><p>Message: The projectBaseDir parameter must be a directory.</p>
<p>Solution: Use a directory instead of a file for projectBaseDir option.</p></li>
<li><p>Message: At least one of the -spoolFileNamePattern, -rpg3FileNamePattern and -rpg4FileNamePattern options must be set.</p>
<p>Solution: Specify at least one input pattern.</p></li>
</ul>
<h1 id="known-bugs-and-deficiencies">Known bugs and deficiencies</h1>
<p>Known bugs and deficiencies of SourceMeter for RPG.</p>
<ul>
<li><p>SourceMeter places the results into the directory specified by the projectName parameter. If special characters (like ‘&lt;’, ‘&gt;’, etc.) are used in the parameter, the analysis will probably fail.</p></li>
<li><p>Conditional compilation directive statements are not handled.</p></li>
<li><p>SQL statements (e.g /EXEC SQL) are not supported.</p></li>
</ul>
<h1 id="faq">FAQ</h1>
<p>Frequently Asked Questions regarding SourceMeter.</p>
<ul>
<li><p>Problem: After starting the analysis, neither does the computer show elevated load nor is any of the SourceMeter tools running.</p>
<p>Solution: SourceMeter creates temporary files during the analysis (e.g. tmp-wrapper.bat) which might be judged as suspicious by certain antivirus programs so they may block them. In these cases, the temporary files must be manually whitelisted.</p></li>
<li><p>Problem: On Windows platforms, in case of deep directory hierarchies, it may happen that the full paths of some files exceed 259 characters. In this case some SourceMeter tools may have problems with opening these files; they will terminate and write appropriate messages in the logs.</p>
<p>Solution: Move the files to be analyzed to a directory closer to the file system root, or use the ‘subst’ shell command.</p></li>
</ul>
<h1 id="appendices">Appendices</h1>
<h2 id="reference-of-source-code-metrics">Reference of source code metrics</h2>
<p>Source code metrics are used to quantify different source code characteristics. FrontEndART SourceMeter computes source code metrics for the following source code element kinds: RPG subroutines, procedures, programs, and systems.</p>
<p>The calculated metrics are grouped into 4 categories, which are the following:</p>
<ul>
<li><p><strong>Complexity metrics:</strong> measure the complexity of source code elements (typically algorithms).</p></li>
<li><p><strong>Coupling metrics:</strong> measure the amount of interdependencies of source code elements.</p></li>
<li><p><strong>Documentation metrics:</strong> measure the amount of comments and documentation of source code elements in the system.</p></li>
<li><p><strong>Size metrics:</strong> measure the basic properties of the analyzed system in terms of different cardinalities (e.g. number of code lines, number of subroutines or data structures).</p></li>
</ul>
<p>In the case of the documentation metrics all the comments found immediately before a source code element are considered as its documentation, while the comments contained inside the source code element are considered as its comments.</p>
<p>The following table summarizes the metrics, their abbreviations and their correspondence to different source code element kinds. Note that in the <strong>free version</strong> only the following 12 metrics are available (all other metrics will get the value 0): CLOC, HPV, HPL, LLOC, LOC, McCC, NOI, PC, TCLOC, TLLOC, TLOC, TNOI.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Category</th>
<th style="text-align: left;">Metric name</th>
<th style="text-align: left;">Abbreviation</th>
<th style="text-align: center;">Procedure</th>
<th style="text-align: center;">Program</th>
<th style="text-align: center;">Subroutine</th>
<th style="text-align: center;">System</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Complexity metrics</td>
<td style="text-align: left;">Halstead Calculated Program Length</td>
<td style="text-align: left;">HCPL</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Halstead Difficulty</td>
<td style="text-align: left;">HDIF</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Halstead Effort</td>
<td style="text-align: left;">HEFF</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Halstead Number of Delivered bugs</td>
<td style="text-align: left;">HNDB</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Halstead Program Length</td>
<td style="text-align: left;">HPL</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Halstead Program Vocabulary</td>
<td style="text-align: left;">HPV</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Halstead Time required to program</td>
<td style="text-align: left;">HTRP</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Halstead Volume</td>
<td style="text-align: left;">HVOL</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Maintainability Index (Microsoft version)</td>
<td style="text-align: left;">MIMS</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Maintainability Index (Original version)</td>
<td style="text-align: left;">MI</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Maintainability Index (SEI version)</td>
<td style="text-align: left;">MISEI</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Maintainability Index (SourceMeter version)</td>
<td style="text-align: left;">MISM</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">McCabe’s Cyclomatic Complexity</td>
<td style="text-align: left;">McCC</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Nesting Level</td>
<td style="text-align: left;">NL</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Nesting Level Else-If</td>
<td style="text-align: left;">NLE</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Program Complexity</td>
<td style="text-align: left;">PC</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Coupling metrics</td>
<td style="text-align: left;">Number of Files</td>
<td style="text-align: left;">NF</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Number of Incoming Invocations</td>
<td style="text-align: left;">NII</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Number of Input Records</td>
<td style="text-align: left;">NIR</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Number of Outgoing Invocations</td>
<td style="text-align: left;">NOI</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Number of Output Records</td>
<td style="text-align: left;">NOR</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Total Number of Files</td>
<td style="text-align: left;">TNF</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Total Number of Outgoing Invocations</td>
<td style="text-align: left;">TNOI</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Documentation metrics</td>
<td style="text-align: left;">Comment Density</td>
<td style="text-align: left;">CD</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Comment Lines of Code</td>
<td style="text-align: left;">CLOC</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Documentation Lines of Code</td>
<td style="text-align: left;">DLOC</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Total Comment Density</td>
<td style="text-align: left;">TCD</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Total Comment Lines of Code</td>
<td style="text-align: left;">TCLOC</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Total Documentation Lines of Code</td>
<td style="text-align: left;">TDLOC</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="even">
<td style="text-align: left;">Size metrics</td>
<td style="text-align: left;">Lines of Code</td>
<td style="text-align: left;">LOC</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Logical Lines of Code</td>
<td style="text-align: left;">LLOC</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Number of Data Structures</td>
<td style="text-align: left;">NDS</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Number of Named Constants</td>
<td style="text-align: left;">NNC</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Number of Parameters</td>
<td style="text-align: left;">NUMPAR</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Number of Standalone Fields</td>
<td style="text-align: left;">NSF</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Number of Statements</td>
<td style="text-align: left;">NOS</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Total Lines of Code</td>
<td style="text-align: left;">TLOC</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Total Logical Lines of Code</td>
<td style="text-align: left;">TLLOC</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Total Number of Data Structures</td>
<td style="text-align: left;">TNDS</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Total Number of Named Constants</td>
<td style="text-align: left;">TNNC</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Total Number of Procedures</td>
<td style="text-align: left;">TNPC</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Total Number of Programs</td>
<td style="text-align: left;">TNPG</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Total Number of Standalone Fields</td>
<td style="text-align: left;">TNSF</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Total Number of Statements</td>
<td style="text-align: left;">TNOS</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Total Number of Subroutines</td>
<td style="text-align: left;">TNSR</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
</tbody>
</table>
<h3 id="complexity-metrics">Complexity metrics</h3>
<h4 id="HCPL">Halstead Calculated Program Length (HCPL)</h4>
<p><strong>Subroutine, Procedure, Program:</strong></p>
<ul>
<li><em>n1</em>: number of distinct operators (semantic meanings of the reserved keywords, semicolons, blocks, and identifiers except in their declarations)</li>
<li><em>n2</em>: number of distinct operands (literals - e.g. character, string, and integer literals, - and the identifiers in their declarations)</li>
</ul>
<p>The calculated program length is <em>n1 * log<sub>2</sub>(n1) + n2 * log<sub>2</sub>(n2)</em>.</p>
<h4 id="HDIF">Halstead Difficulty (HDIF)</h4>
<p><strong>Subroutine, Procedure, Program:</strong></p>
<ul>
<li><em>n1</em>: number of distinct operators (semantic meanings of the reserved keywords, semicolons, blocks, and identifiers except in their declarations)</li>
<li><em>n2</em>: number of distinct operands (literals - e.g. character, string, and integer literals, - and the identifiers in their declarations)</li>
<li><em>N2</em>: total number of operands</li>
</ul>
<p>The Halstead difficulty is <em>n1/2 * N2/n2</em>.</p>
<h4 id="HEFF">Halstead Effort (HEFF)</h4>
<p><strong>Subroutine, Procedure, Program:</strong></p>
<ul>
<li><em>n1</em>: number of distinct operators (semantic meanings of the reserved keywords, semicolons, blocks, and identifiers except in their declarations)</li>
<li><em>n2</em>: number of distinct operands (literals - e.g. character, string, and integer literals, - and the identifiers in their declarations)</li>
<li><em>N1</em>: total number of operators</li>
<li><em>N2</em>: total number of operands</li>
<li><em>n : n1 + n2</em> (program vocabulary)</li>
<li><em>N : N1 + N2</em> (program length)</li>
<li><em>V : N * log<sub>2</sub>(n)</em> (volume)</li>
<li><em>D : n1/2 * N2/n2</em> (difficulty)</li>
</ul>
<p>The Halstead effort is <em>D * V</em>.</p>
<h4 id="HNDB">Halstead Number of Delivered bugs (HNDB)</h4>
<p><strong>Subroutine, Procedure, Program:</strong></p>
<ul>
<li><em>n1</em>: number of distinct operators (semantic meanings of the reserved keywords, semicolons, blocks, and identifiers except in their declarations)</li>
<li><em>n2</em>: number of distinct operands (literals - e.g. character, string, and integer literals, - and the identifiers in their declarations)</li>
<li><em>N1</em>: total number of operators</li>
<li><em>N2</em>: total number of operands</li>
<li><em>n : n1 + n2</em> (program vocabulary)</li>
<li><em>N : N1 + N2</em> (program length)</li>
<li><em>V : N * log<sub>2</sub>(n)</em> (volume)</li>
<li><em>D : n1/2 * N2/n2</em> (difficulty)</li>
<li><em>E : D * V</em> (effort)</li>
</ul>
<p>Number of delivered bugs is <em>E<sup>2/3</sup>/3000</em>.</p>
<h4 id="HPL">Halstead Program Length (HPL)</h4>
<p><strong>Subroutine, Procedure, Program:</strong></p>
<ul>
<li><em>N1</em>: total number of operators (semantic meanings of the reserved keywords, semicolons, blocks, and identifiers except in their declarations)</li>
<li><em>N2</em>: total number of operands (literals - e.g. character, string, and integer literals, - and the identifiers in their declarations)</li>
</ul>
<p>Halstead program length is <em>N1 + N2</em>.</p>
<h4 id="HPV">Halstead Program Vocabulary (HPV)</h4>
<p><strong>Subroutine, Procedure, Program:</strong></p>
<ul>
<li><em>n1</em>: number of distinct operators (semantic meanings of the reserved keywords, semicolons, blocks, and identifiers except in their declarations)</li>
<li><em>n2</em>: number of distinct operands (literals - e.g. character, string, and integer literals, - and the identifiers in their declarations)</li>
</ul>
<p>Halstead program vocabulary is <em>n1 + n2</em>.</p>
<h4 id="HTRP">Halstead Time required to program (HTRP)</h4>
<p><strong>Subroutine, Procedure, Program:</strong></p>
<ul>
<li><em>n1</em>: number of distinct operators (semantic meanings of the reserved keywords, semicolons, blocks, and identifiers except in their declarations)</li>
<li><em>n2</em>: number of distinct operands (literals - e.g. character, string, and integer literals, - and the identifiers in their declarations)</li>
<li><em>N1</em>: total number of operators</li>
<li><em>N2</em>: total number of operands</li>
<li><em>n : n1 + n2</em> (program vocabulary)</li>
<li><em>N : N1 + N2</em> (program length)</li>
<li><em>V : N * log<sub>2</sub>(n)</em> (volume)</li>
<li><em>D : n1/2 * N2/n2</em> (difficulty)</li>
<li><em>E : D * V</em> (effort)</li>
</ul>
<p>Halstead time required to program is <em>E/18</em> seconds.</p>
<h4 id="HVOL">Halstead Volume (HVOL)</h4>
<p><strong>Subroutine, Procedure, Program:</strong></p>
<ul>
<li><em>n1</em>: number of distinct operators (semantic meanings of the reserved keywords, semicolons, blocks, and identifiers except in their declarations)</li>
<li><em>n2</em>: number of distinct operands (literals - e.g. character, string, and integer literals, - and the identifiers in their declarations)</li>
<li><em>N1</em>: total number of operators</li>
<li><em>N2</em>: total number of operands</li>
<li><em>n : n1 + n2</em> (program vocabulary)</li>
<li><em>N : N1 + N2</em> (program length)</li>
</ul>
<p>The Halstead volume is <em>N * log<sub>2</sub>(n)</em>.</p>
<h4 id="MIMS">Maintainability Index (Microsoft version) (MIMS)</h4>
<ul>
<li><em>HVOL</em>: Halstead Volume</li>
<li><em>McCC</em>: McCabe’s cyclomatic complexity</li>
<li><em>LLOC</em>: logical lines of code</li>
</ul>
<p>The Maintainability Index used by Microsoft’s Visual Studio is computed by the following formula:</p>
<p><em>MIMS = max(0,(171 - 5.2 * ln(HVOL) - 0.23 * (McCC) - 16.2 * ln(LLOC)) * 100 / 171)</em></p>
<h4 id="MI">Maintainability Index (Original version) (MI)</h4>
<ul>
<li><em>HVOL</em>: Halstead Volume</li>
<li><em>McCC</em>: McCabe’s cyclomatic complexity</li>
<li><em>LLOC</em>: logical lines of code</li>
</ul>
<p>The original Maintainability Index is computed by the following formula:</p>
<p><em>MI = 171 - 5.2 * ln(HVOL) - 0.23 * (McCC) - 16.2 * ln(LLOC)</em></p>
<h4 id="MISEI">Maintainability Index (SEI version) (MISEI)</h4>
<ul>
<li><em>HVOL</em>: Halstead Volume</li>
<li><em>McCC</em>: McCabe’s cyclomatic complexity</li>
<li><em>LLOC</em>: logical lines of code</li>
<li><em>CD</em>: comment density</li>
</ul>
<p>The Maintainability Index derived by the Software Engineering Institute (SEI) is computed by the following formula:</p>
<p><em>MISEI = 171 - 5.2 * log<sub>2</sub>(HVOL) - 0.23 * McCC - 16.2 * log<sub>2</sub>(LLOC) + 50 * sin(sqrt(2.4 * CD))</em></p>
<h4 id="MISM">Maintainability Index (SourceMeter version) (MISM)</h4>
<ul>
<li><em>HVOL</em>: Halstead Volume</li>
<li><em>McCC</em>: McCabe’s cyclomatic complexity</li>
<li><em>LLOC</em>: logical lines of code</li>
<li><em>CD</em>: comment density</li>
</ul>
<p>The Maintainability Index proposed by SourceMeter combines the different scaling approach from Microsoft’s version with the inclusion of comment percentage from the Software Engineering Institute (SEI) version into the following formula:</p>
<p><em>MISM = max(0, (171 - 5.2 * log<sub>2</sub>(HVOL) - 0.23 * McCC - 16.2 * log<sub>2</sub>(LLOC) + 50 * sin(sqrt(2.4 * CD))) * 100 / 171)</em></p>
<h4 id="McCC">McCabe’s Cyclomatic Complexity (McCC)</h4>
<p><strong>Subroutine:</strong> complexity of the subroutine expressed as the number of independent control flow paths in it. It represents a lower bound for the number of possible execution paths in the source code and at the same time it is an upper bound for the minimum number of test cases needed for achieving full branch test coverage. The value of the metric is calculated as the number of the following instructions plus 1: if (including or, and), else-if, for, do, do-while, do-until, when, on-error. The following instructions are not included: else, select, monitor.</p>
<p><strong>Procedure:</strong> complexity of the procedure expressed as the number of independent control flow paths in it. It represents a lower bound for the number of possible execution paths in the source code and at the same time it is an upper bound for the minimum number of test cases needed for achieving full branch test coverage. The value of the metric is calculated as the number of the following instructions plus 1: if (including or, and), else-if, for, do, do-while, do-until, when, on-error. The following instructions are not included: else, select, monitor. Subroutines defined locally in the procedure are not included.</p>
<h4 id="NL">Nesting Level (NL)</h4>
<p><strong>Subroutine:</strong> complexity of the subroutine expressed as the depth of the maximum embeddedness of its conditional, iteration and exception handling block scopes. The following instructions are taken into account: if, else-if, else, for, do, do-while, do-until, select, monitor, on-error. The following instructions do not increase the value by themselves; however, if additional embeddednesses can be found in their blocks, they are considered: when, other.</p>
<p><strong>Procedure:</strong> complexity of the procedure expressed as the depth of the maximum embeddedness of its conditional, iteration and exception handling block scopes. The following instructions are taken into account: if, else-if, else, for, do, do-while, do-until, select, monitor, on-error. The following instructions do not increase the value by themselves; however, if additional embeddednesses can be found in their blocks, they are considered: when, other. Contained local subroutines are not included.</p>
<p><strong>Program:</strong> complexity of the program expressed as the depth of the maximum embeddedness of its conditional, iteration and exception handling block scopes. The following instructions are taken into account: if, else-if, else, for, do, do-while, do-until, select, monitor, on-error. The following instructions do not increase the value by themselves; however, if additional embeddednesses can be found in their blocks, they are considered: when, other. Contained local subroutines and procedures are not included.</p>
<h4 id="NLE">Nesting Level Else-If (NLE)</h4>
<p><strong>Subroutine:</strong> complexity of the subroutine expressed as the depth of the maximum embeddedness of its conditional, iteration and exception handling block scopes. The following instructions are taken into account: if, for, do, do-while, do-until, select, monitor, on-error. Only the first if statement will be taken into consideration of the if-elseif-else block. The following instructions do not increase the value by themselves; however, if additional embeddednesses can be found in their blocks, they are considered: else-if, when, other.</p>
<p><strong>Procedure:</strong> complexity of the procedure expressed as the depth of the maximum embeddedness of its conditional, iteration and exception handling block scopes. The following instructions are taken into account: if, for, do, do-while, do-until, select, monitor, on-error. Only the first if statement will be taken into consideration of the if-elseif-else block. The following instructions do not increase the value by themselves; however, if additional embeddednesses can be found in their blocks, they are considered: else-if, when, other. Contained local subroutines are not included.</p>
<p><strong>Program:</strong> complexity of the program expressed as the depth of the maximum embeddedness of its conditional, iteration and exception handling block scopes. The following instructions are taken into account: if, for, do, do-while, do-until, select, monitor, on-error. Only the first if statement will be taken into consideration of the if-elseif-else block. The following instructions do not increase the value by themselves; however, if additional embeddednesses can be found in their blocks, they are considered: else-if, when, other. Contained local subroutines and procedures are not included.</p>
<h4 id="PC">Program Complexity (PC)</h4>
<p><strong>Program:</strong> The sum of the McCC complexity metrics of the contained subroutines and procedures plus the McCC of the main source section.</p>
<h3 id="coupling-metrics">Coupling metrics</h3>
<h4 id="NF">Number of Files (NF)</h4>
<p><strong>Procedure:</strong> number of files defined in the procedure.</p>
<p><strong>Program:</strong> number of files defined in the program, excluding the files defined in procedures of the program.</p>
<h4 id="NII">Number of Incoming Invocations (NII)</h4>
<p><strong>Subrouine:</strong> number of other subroutines, procedures, and programs which directly call the subroutine. If the subroutine is invoked several times from the same subroutine, procedure, or program, it is counted only once.</p>
<p><strong>Procedure:</strong> number of other subroutines, procedures, and programs which directly call the procedure. If a procedure is invoked several times from the same subroutine, procedure, or program, it is counted only once.</p>
<p><strong>Program:</strong> number of other subroutines, procedures, and programs which directly call the program. If a program is invoked several times from the same subroutine, procedure, or program, it is counted only once.</p>
<h4 id="NIR">Number of Input Records (NIR)</h4>
<p><strong>Program:</strong> number of input records(externally and program defined input records) declared in the program.</p>
<h4 id="NOI">Number of Outgoing Invocations (NOI)</h4>
<p><strong>Subroutine:</strong> number of directly called subroutines, procedures, or programs. If a subroutine, procedure, or program is invoked several times, it is counted only once.</p>
<p><strong>Procedure:</strong> number of directly called subroutines, procedures, or programs. If a subroutine, procedure, or program is invoked several times, it is counted only once. NOI of contained subroutines are not counted.</p>
<p><strong>Program:</strong> number of directly called subroutines, procedures, or programs. If a subroutine, procedure, or program is invoked several times, it is counted only once. NOI of contained subroutines, procedures are not counted.</p>
<h4 id="NOR">Number of Output Records (NOR)</h4>
<p><strong>Program:</strong> number of output records(externally and program defined output records) declared in the program.</p>
<h4 id="TNF">Total Number of Files (TNF)</h4>
<p><strong>Program:</strong> number of files defined in the program, including the files defined in procedures of the program.</p>
<p><strong>System:</strong> number of all files defined in the system.</p>
<h4 id="TNOI">Total Number of Outgoing Invocations (TNOI)</h4>
<p><strong>Procedure:</strong> number of directly called procedures, or programs. If a procedure, or program is invoked several times, it is counted only once. NOI of contained subroutines are included.</p>
<p><strong>Program:</strong> number of directly called procedures, or programs. If a subroutine, procedure, or program is invoked several times, it is counted only once. NOI of contained subroutines and TNOI of contained procedures are included.</p>
<h3 id="documentation-metrics">Documentation metrics</h3>
<h4 id="CD">Comment Density (CD)</h4>
<p><strong>Subroutine:</strong> ratio of the comment lines of the subroutine (CLOC) to the sum of its comment (CLOC) and logical lines of code (LLOC).</p>
<p><strong>Procedure:</strong> ratio of the comment lines of the procedure (CLOC) to the sum of its comment (CLOC) and logical lines of code (LLOC).</p>
<p><strong>Program:</strong> ratio of the comment lines of the program (CLOC) to the sum of its comment (CLOC) and logical lines of code (LLOC).</p>
<h4 id="CLOC">Comment Lines of Code (CLOC)</h4>
<p><strong>Subroutine:</strong> number of comment and documentation code lines of the subroutine.</p>
<p><strong>Procedure:</strong> number of comment and documentation code lines of the procedure; however, its nested subroutines are not included.</p>
<p><strong>Program:</strong> number of comment and documentation code lines of the program; however, its subroutines and procedures are not included.</p>
<h4 id="DLOC">Documentation Lines of Code (DLOC)</h4>
<p><strong>Subroutine:</strong> number of documentation code lines of the subroutine.</p>
<p><strong>Procedure:</strong> number of documentation code lines of the procedure, however, its local subroutines are not included.</p>
<p><strong>Program:</strong> number of documentation code lines of the program, however, its subroutines and procedures are not included.</p>
<h4 id="TCD">Total Comment Density (TCD)</h4>
<p><strong>Procedure:</strong> ratio of the total comment lines of the procedure (TCLOC) to the sum of its total comment (TCLOC) and total logical lines of code (TLLOC).</p>
<p><strong>Program:</strong> ratio of the total comment lines of the program (TCLOC) to the sum of its total comment (TCLOC) and total logical lines of code (TLLOC).</p>
<p><strong>System:</strong> ratio of the total comment lines of the system (TCLOC) to the sum of its total comment (TCLOC) and total logical lines of code (TLLOC).</p>
<h4 id="TCLOC">Total Comment Lines of Code (TCLOC)</h4>
<p><strong>Procedure:</strong> number of comment and documentation code lines of the procedure, including its local subroutines’ CLOC metrics.</p>
<p><strong>Program:</strong> number of comment and documentation code lines of the program, including its local subroutines’ CLOC metrics and its local procedures’ TCLOC metrics.</p>
<p><strong>System:</strong> sum of the TLOC metrics of programs.</p>
<h4 id="TDLOC">Total Documentation Lines of Code (TDLOC)</h4>
<p><strong>Procedure:</strong> number of documentation code lines of the procedure, including the contained subroutines.</p>
<p><strong>Program:</strong> number of documentation code lines of the program, including its local subroutines and procedures.</p>
<p><strong>System:</strong> sum of the TDLOC values of the contained programs.</p>
<h3 id="size-metrics">Size metrics</h3>
<h4 id="LOC">Lines of Code (LOC)</h4>
<p><strong>Subroutine:</strong> number of code lines of the subroutine, including empty and comment lines.</p>
<p><strong>Procedure:</strong> number of code lines of the procedure, including empty and comment lines, however, its local subroutines are not included.</p>
<p><strong>Program:</strong> number of code lines of the program, including empty and comment lines; however, its subroutines and procedures are not included.</p>
<h4 id="LLOC">Logical Lines of Code (LLOC)</h4>
<p><strong>Subroutine:</strong> number of non-empty and non-comment code lines of the subroutine.</p>
<p><strong>Procedure:</strong> number of non-empty and non-comment code lines of the procedure, however, its local subroutines are not included.</p>
<p><strong>Program:</strong> number of non-empty and non-comment code lines of the program; however, its subroutines and procedures are not included.</p>
<h4 id="NDS">Number of Data Structures (NDS)</h4>
<p><strong>Procedure:</strong> number of datastructures declared in the procedure.</p>
<p><strong>Program:</strong> number of datastructures declared in the program excluding the datastructures declared in procedures of the program.</p>
<h4 id="NNC">Number of Named Constants (NNC)</h4>
<p><strong>Program:</strong> number of named constants in the program, including the constants declared in procedures.</p>
<p><strong>System:</strong> number of all named constants in the system.</p>
<h4 id="NUMPAR">Number of Parameters (NUMPAR)</h4>
<p><strong>Procedure:</strong> number of the parameters of the procedure.</p>
<p><strong>Program:</strong> number of the parameters of the program.</p>
<h4 id="NSF">Number of Standalone Fields (NSF)</h4>
<p><strong>Procedure:</strong> number of standalone fields declared in the procedure.</p>
<p><strong>Program:</strong> number of standalone fields declared in the program, excluding the standalone fields declared in procedures of the program.</p>
<h4 id="NOS">Number of Statements (NOS)</h4>
<p>Statements are considered as instructions occuring in Calculation Specification entries.</p>
<p><strong>Subroutine:</strong> number of statements in the subroutine.</p>
<p><strong>Procedure:</strong> number of statements in the procedure; however, the statements of its local subroutines are not included.</p>
<h4 id="TLOC">Total Lines of Code (TLOC)</h4>
<p><strong>Procedure:</strong> number of code lines of the procedure, including empty and comment lines, as well as its local subroutines.</p>
<p><strong>Program:</strong> number of code lines of the program, including empty and comment lines, as well as its local subroutines and procedures.</p>
<p><strong>System:</strong> sum of the TLOC metrics of the programs.</p>
<h4 id="TLLOC">Total Logical Lines of Code (TLLOC)</h4>
<p><strong>Procedure:</strong> number of non-empty and non-comment code lines of the procedure, including its local subroutines.</p>
<p><strong>Program:</strong> number of non-empty and non-comment code lines of the program, including the non-empty and non-comment code lines of its local subroutines, procedures.</p>
<p><strong>System:</strong> number of non-empty and non-comment code lines of the system (sum of TLLOC values of programs).</p>
<h4 id="TNDS">Total Number of Data Structures (TNDS)</h4>
<p><strong>Program:</strong> number of datastructures declared in the program including the datastructures declared in procedures of the program.</p>
<p><strong>System:</strong> number of all datastructures declared in the system.</p>
<h4 id="TNNC">Total Number of Named Constants (TNNC)</h4>
<p><strong>Program:</strong> number of named constants in the program, including the constants declared in procedures.</p>
<p><strong>System:</strong> number of all named constants in the system.</p>
<h4 id="TNPC">Total Number of Procedures (TNPC)</h4>
<p><strong>Program:</strong> number of procedures located in the program.</p>
<p><strong>System:</strong> number of procedures located in the system.</p>
<h4 id="TNPG">Total Number of Programs (TNPG)</h4>
<p><strong>System:</strong> number of programs located in the system.</p>
<h4 id="TNSF">Total Number of Standalone Fields (TNSF)</h4>
<p><strong>Program:</strong> number of standalone fields declared in the program, including the standalone fields declared in procedures of the program.</p>
<p><strong>System:</strong> number of all standalone fields declared in the system.</p>
<h4 id="TNOS">Total Number of Statements (TNOS)</h4>
<p><strong>Procedure:</strong> number of statements in the procedure, including the statements of its subroutines.</p>
<p><strong>Program:</strong> number of statements in the program, including the statements of its subroutines and procedures.</p>
<p><strong>System:</strong> number of all statements in the system.</p>
<h4 id="TNSR">Total Number of Subroutines (TNSR)</h4>
<p><strong>Procedure:</strong> number of subroutines located in the procedure.</p>
<p><strong>Program:</strong> number of subroutines located in the program, including subroutines defined in a procedure.</p>
<p><strong>System:</strong> number of all subroutines in the system.</p>
<h2 id="reference-of-code-duplication-metrics">Reference of code duplication metrics</h2>
<p>Code cloning (or copy-paste programming) means the copying of an existing piece of source code, pasting it somewhere else, and typically performing smaller modifications on it. Based on the level of similarity between the copied code fragments we can define the following duplication types:</p>
<ul>
<li><p><strong>Type-1</strong>: the copied code parts are identical code fragments except for variations in whitespace, layout and comments.</p></li>
<li><p><strong>Type-2</strong>: syntactically identical fragments except for variations in identifier names, literals, type references, whitespace, layout and comments.</p></li>
<li><p><strong>Type-3</strong>: copied fragments with further modifications such as altered, added, or removed statements, in addition to variations in identifier names, literals, type references, whitespace, layout and comments.</p></li>
<li><p><strong>Type-4</strong>: the copied code fragments are syntactically different, but they perform the same functionality, i.e. they are semantically the same.</p></li>
</ul>
<p>FrontEndART SourceMeter is capable of identifying Type-2 clones, i.e. code fragments that are structurally identical, but may differ in variable names, literals, identifiers, etc.</p>
<p>Two code segments correspond to each other if they are copies of each other. This relation is an equivalence relation and we use the notion of clone classes to the classes of the relation, and the members of the classes will be referred to as clone instances. Owing to the nature of the relation, each clone class must contain at least two clone instances.</p>
<p>Clones are tracked during the source code analysis of consecutive revisions of the analyzed software system. FrontEndART SourceMeter detects suspicious, inconsistently changing code copies, which are called “clone smells”. The smells concerning clone classes are the following:</p>
<ul>
<li><p><strong>Disappearing Clone Class (DCC):</strong> The clone class existed in the previously analyzed revision but it does not exist anymore.</p></li>
<li><p><strong>Appearing Clone Class (ACC):</strong> The clone class did not exist in the previously analyzed revision.</p></li>
</ul>
<p>The smells concerning clone instances are issued only if the containing clone class does not contain any smell. These are the following:</p>
<ul>
<li><p><strong>Disappearing Clone Instance (DCI):</strong> The clone instance existed in the previously analyzed revision but it does not exist anymore.</p></li>
<li><p><strong>Appearing Clone Instance (ACI):</strong> The clone instance did not exist in the previously analyzed revision.</p></li>
<li><p><strong>Moving Clone Instance (MCI):</strong> The clone instance belonged to a different clone class in the previously analyzed revision than its current class.</p></li>
</ul>
<p>The following table summarizes the code duplication metrics, their abbreviations, and their correspondence to different source code element types.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Metric name</th>
<th style="text-align: left;">Abbrev.</th>
<th style="text-align: center;">Clone Instance</th>
<th style="text-align: center;">Clone Class</th>
<th style="text-align: center;">Subroutine</th>
<th style="text-align: center;">Procedure</th>
<th style="text-align: center;">Program</th>
<th style="text-align: center;">System</th>
<th style="text-align: center;">Component</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Clone Age</td>
<td style="text-align: left;">CA</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Clone Classes</td>
<td style="text-align: left;">CCL</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Clone Complexity</td>
<td style="text-align: left;">CCO</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
<tr class="even">
<td style="text-align: left;">Clone Coverage</td>
<td style="text-align: left;">CC</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Clone Elimination Effort</td>
<td style="text-align: left;">CEE</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="even">
<td style="text-align: left;">Clone Elimination Gain</td>
<td style="text-align: left;">CEG</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Clone Embeddedness</td>
<td style="text-align: left;">CE</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Clone Instances</td>
<td style="text-align: left;">CI</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Clone Line Coverage</td>
<td style="text-align: left;">CLC</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
<tr class="even">
<td style="text-align: left;">Clone Lines of Code</td>
<td style="text-align: left;">CLLOC</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Clone Logical Line Coverage</td>
<td style="text-align: left;">CLLC</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
<tr class="even">
<td style="text-align: left;">Clone Risk</td>
<td style="text-align: left;">CR</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Clone Variability</td>
<td style="text-align: left;">CV</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Lines of Duplicated Code</td>
<td style="text-align: left;">LDC</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Logical Lines of Duplicated Code</td>
<td style="text-align: left;">LLDC</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
</tr>
<tr class="even">
<td style="text-align: left;">Normalized Clone Radius</td>
<td style="text-align: left;">NCR</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
</tr>
</tbody>
</table>
<h3 id="clone-metrics">Clone metrics</h3>
<h4 id="CA">Clone Age (CA)</h4>
<p><strong>Clone class/clone instance:</strong> number of previously analyzed revisions in which the clone class/clone instance was present + 1.</p>
<h4 id="CCL">Clone Classes (CCL)</h4>
<p><strong>Subroutine/procedure/program/system:</strong> number of clone classes having at least one clone instance in the source code element.</p>
<h4 id="CCO">Clone Complexity (CCO)</h4>
<p><strong>Clone instance:</strong> the McCabe complexity of the code fragment corresponding to the clone instance.</p>
<p><strong>Clone class:</strong> sum of CCO of clone instances in the clone class.</p>
<p><strong>Subroutine/procedure/program/system:</strong> sum of CCO of clone instances in the source code element.</p>
<h4 id="CC">Clone Coverage (CC)</h4>
<p><strong>Subroutine/procedure/program/system:</strong> ratio of code covered by code duplications in the source code element to the size of the source code element.</p>
<h4 id="CEE">Clone Elimination Effort (CEE)</h4>
<p><strong>Clone class:</strong> index of the effort required to eliminate the clone class. It is computed as the product of CI, CE, and NCR.</p>
<h4 id="CEG">Clone Elimination Gain (CEG)</h4>
<p><strong>Clone class:</strong> index of the gain resulting from eliminating the clone class. It is computed as the ratio of CR to CEE.</p>
<h4 id="CE">Clone Embeddedness (CE)</h4>
<p><strong>Clone instance:</strong> sum of incoming and outgoing references (subroutine calls, procedure calls, and variable references) in the code fragment corresponding to the clone instance.</p>
<p><strong>Clone class:</strong> sum of CE of the clone instances of the clone class.</p>
<h4 id="CI">Clone Instances (CI)</h4>
<p><strong>Subroutine/procedure/program/system:</strong> number of clone instances in the source code element.</p>
<p><strong>Clone class:</strong> number of clone instances in the clone class.</p>
<h4 id="CLC">Clone Line Coverage (CLC)</h4>
<p><strong>Subroutine/procedure/program/system:</strong> ratio of code covered by code duplications in the source code element to the size of the source code element, expressed in terms of lines of code.</p>
<h4 id="CLLOC">Clone Lines of Code (CLLOC)</h4>
<p><strong>Clone instance:</strong> length of the clone instance expressed in terms of lines of code.</p>
<p><strong>Clone class:</strong> average of CLLOC of clone instances belonging to the clone class.</p>
<h4 id="CLLC">Clone Logical Line Coverage (CLLC)</h4>
<p><strong>Subroutine/procedure/program/system:</strong> ratio of code covered by code duplications in the source code element to the size of source code element, expressed in terms of logical lines of code (non-empty, non-comment lines).</p>
<h4 id="CR">Clone Risk (CR)</h4>
<p><strong>Clone class:</strong> risk index of the existence of the clone class. It is computed as the product of CLLOC, CI, CCO, NCR, and CV.</p>
<h4 id="CV">Clone Variability (CV)</h4>
<p><strong>Clone instance:</strong> instability of the clone instance since it appeared. It is computed as the ratio of the number of previously analyzed revisions when the instance had been changed to its age (CA).</p>
<p><strong>Clone class:</strong> instability of the clone class since it appeared. It is computed as the ratio of the number of previously analyzed revisions when its contained instances were moved, deleted, or added, to its age (CA), plus the average CV of its clone instances.</p>
<h4 id="LDC">Lines of Duplicated Code (LDC)</h4>
<p><strong>Subroutine/procedure/program/system:</strong> number of code lines covered by code duplications in the source code element.</p>
<h4 id="LLDC">Logical Lines of Duplicated Code (LLDC)</h4>
<p><strong>Subroutine/procedure/program/system:</strong> number of logical code lines covered by code duplications in the source code element.</p>
<h4 id="NCR">Normalized Clone Radius (NCR)</h4>
<p><strong>Clone class:</strong> normalized average distance among clone instances belonging to the clone class.</p>
<h2 id="reference-of-faulthunter-coding-rule-violations">Reference of FaultHunter coding rule violations</h2>
<p>FaultHunter is the coding rule violation checker module of SourceMeter. This module makes it possible to identify common RPG coding rule violations in the code (so-called bad practices). The algorithms implemented in the FaultHunter module work on the precise Abstract Semantic Graph of SourceMeter which results in higher precision and recall compared to other tools with a rougher syntactic analyzer.</p>
<p>The list of rulesets and rules contained in each ruleset are the following:</p>
<ul>
<li><p><strong>Basic Rules:</strong> The Basic ruleset contains a collection of good practices which should be followed.</p></li>
<li><p><strong>Design Rules:</strong> The Design Ruleset contains a collection of rules for indicating bad implementations coming from bad design.</p></li>
<li><p><strong>Documentation Rules:</strong> The Documentation Ruleset contains a collection of rules for indicating bad documentation or the lack of documentation.</p></li>
<li><p><strong>Naming Rules:</strong> The Naming Ruleset contains a collection of rules for indicating bad naming conventions.</p></li>
<li><p><strong>Security Rules:</strong> The Security Ruleset contains a collection of rules to prevent security issues.</p></li>
<li><p><strong>Size Rules:</strong> The Size Ruleset contains a collection of rules giving a limit to different aspects/properties of the system.</p></li>
<li><p><strong>Type Rules:</strong> The Type Ruleset contains a collection of rules that point the weak spots with a focus on types and type compatibility.</p></li>
<li><p><strong>Unnecessary and Unused Code Rules:</strong> The Unnecessary and Unused Ruleset contains a collection of rules for unnecessary,unused or ineffective code.</p></li>
</ul>
<p>The following table contains the enabled rules and their priorities:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Category</th>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Abbreviation</th>
<th style="text-align: left;">Prio.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Basic Rules</td>
<td style="text-align: left;">“*SRCSTMT, *NODEBUGIO” Header Option Should be Used</td>
<td style="text-align: left;">FHRPG_SHOSU</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">/Eject Should Used After Specifications (F,D,C)</td>
<td style="text-align: left;">FHRPG_ESUAS</td>
<td style="text-align: left;">Minor</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Avoid Debug Operations</td>
<td style="text-align: left;">FHRPG_ADS</td>
<td style="text-align: left;">Minor</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Avoid operation</td>
<td style="text-align: left;">FHRPG_AO</td>
<td style="text-align: left;">Critical</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">CHAIN operation should use resulting indicator</td>
<td style="text-align: left;">FHRPG_COSURI</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Call operand is a variable</td>
<td style="text-align: left;">FHRPG_COV</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Complete Conditional Operation Needed</td>
<td style="text-align: left;">FHRPG_CCO</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Figurative Constant Should Used</td>
<td style="text-align: left;">FHRPG_FCSU</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Forbidden operation</td>
<td style="text-align: left;">FHRPG_FO</td>
<td style="text-align: left;">Critical</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">IF-ELSEIF Should Terminated With ELSE</td>
<td style="text-align: left;">FHRPG_ISTWE</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">If Should Not Use Indicators</td>
<td style="text-align: left;">FHRPG_ISNUI</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Missing Error Handling in F Spec</td>
<td style="text-align: left;">FHRPG_MEHFS</td>
<td style="text-align: left;">Critical</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">USROPN Files Should Explicitly Closed</td>
<td style="text-align: left;">FHRPG_UFSEC</td>
<td style="text-align: left;">Critical</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Use ENDxx instead of END</td>
<td style="text-align: left;">FHRPG_ESU</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Design Rules</td>
<td style="text-align: left;">Circular reference between subroutines</td>
<td style="text-align: left;">FHRPG_SCC</td>
<td style="text-align: left;">Critical</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Deep /COPY, /INCLUDE embededdness</td>
<td style="text-align: left;">FHRPG_DCI</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Files should be defined externally</td>
<td style="text-align: left;">FHRPG_FSDE</td>
<td style="text-align: left;">Minor</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">First Parameter Must be KLIST</td>
<td style="text-align: left;">FHRPG_FPMK</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Large static array</td>
<td style="text-align: left;">FHRPG_LSA</td>
<td style="text-align: left;">Minor</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Line Count Should Defined in INFDS</td>
<td style="text-align: left;">FHRPG_LCSDI</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Non-Input Files Should Use No-Lock</td>
<td style="text-align: left;">FHRPG_NFSUNL</td>
<td style="text-align: left;">Critical</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Odd Numeric Fields Should be Used</td>
<td style="text-align: left;">FHRPG_ONFSU</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Documentation Rules</td>
<td style="text-align: left;">Subroutines Should be Documented</td>
<td style="text-align: left;">FHRPG_SSD</td>
<td style="text-align: left;">Critical</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Uncommented Long Code Fragment</td>
<td style="text-align: left;">FHRPG_ULCF</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Naming Rules</td>
<td style="text-align: left;">File uses prefixed name</td>
<td style="text-align: left;">FHRPG_FPN</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Lower case letter in the name of called program or procedure</td>
<td style="text-align: left;">FHRPG_CWLL</td>
<td style="text-align: left;">Critical</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Subroutine Name Without Naming Convention</td>
<td style="text-align: left;">FHRPG_SNWNC</td>
<td style="text-align: left;">Minor</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Too long name</td>
<td style="text-align: left;">FHRPG_LVN</td>
<td style="text-align: left;">Minor</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Too short name</td>
<td style="text-align: left;">FHRPG_SVN</td>
<td style="text-align: left;">Minor</td>
</tr>
<tr class="even">
<td style="text-align: left;">Security Rules</td>
<td style="text-align: left;">Copyright keyword should be defined in Control Specification</td>
<td style="text-align: left;">FHRPG_CSD</td>
<td style="text-align: left;">Minor</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Size Rules</td>
<td style="text-align: left;">Do block Has Too Many Statements</td>
<td style="text-align: left;">FHRPG_DHTMS</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">If block Has Too Many Statements</td>
<td style="text-align: left;">FHRPG_IHTMS</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">WHEN Branch With Too Many Statements</td>
<td style="text-align: left;">FHRPG_WBWTMS</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="even">
<td style="text-align: left;">Type Rules</td>
<td style="text-align: left;">Numeric operands of MOVE(L) are not compatible</td>
<td style="text-align: left;">FHRPG_IMO</td>
<td style="text-align: left;">Major</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Unnecessary and Unused Code Rules</td>
<td style="text-align: left;">Commented RPG statement</td>
<td style="text-align: left;">FHRPG_CRS</td>
<td style="text-align: left;">Critical</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Conditional expression is always false</td>
<td style="text-align: left;">FHRPG_BNE</td>
<td style="text-align: left;">Critical</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Subroutine is never called</td>
<td style="text-align: left;">FHRPG_US</td>
<td style="text-align: left;">Critical</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">Unused variable</td>
<td style="text-align: left;">FHRPG_UV</td>
<td style="text-align: left;">Critical</td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;">Variable only referenced from an unused subroutine</td>
<td style="text-align: left;">FHRPG_VUIUS</td>
<td style="text-align: left;">Critical</td>
</tr>
</tbody>
</table>
<h3 id="basic-rules">Basic Rules</h3>
<h4 id="FHRPG_SHOSU">“*SRCSTMT, *NODEBUGIO” Header Option Should be Used</h4>
<p>Cannot found the option(*SRCSTMT: *NODEBUGIO) entry in Control Specification. Using *SRCSTMT imply that line numbers cited in error statements will correspond correctly to the code. *NODEBUGIO prevents debug operations from stopping on I/O.</p>
<p>Example(s):</p>
<pre><code>   H datedit(*ymd)                                                                                
   H decedit(*jobrun)                                                                             
   H debug                                                                                        
   H option(*srcstmt) </code></pre>
<h4 id="FHRPG_ESUAS">/Eject Should Used After Specifications (F,D,C)</h4>
<p>After File Description, Calculation, and Definiton specifications an /EJECT compiler directive should be inserted that leads to a better formatted compiler listing. When a specification type is missing, no rule violation occurs.</p>
<p>Example(s):</p>
<pre><code>   H option(*nodebugio: *srcstmt)                                                                 
   Faci9000a  if   e           k disk                                                             
   F                                     rename(c9rc:ci9000ar)                                    
   Fab0100d   cf   e             workstn infds(wsds)                                              
   F                                     sfile(msgsfl:msgrrn)                                     
    /EJECT 
   D ldpf          euds                                                                           
   C                   exsr      dftsbr                                                           </code></pre>
<h4 id="FHRPG_ADS">Avoid Debug Operations</h4>
<p>During the developement process DEBUG(*YES) and DUMP operations provide useful information for tracking and finding bugs. So, a faster bug fixing phase can be achieved, however, debug operations are unwanted in production code.</p>
<p>Example(s):</p>
<pre><code>  H DEBUG(*YES)</code></pre>
<h4 id="FHRPG_AO">Avoid operation</h4>
<p>An avoid operation can be found in the source code. In calculation specification avoid using these operations because they have a bad effect on quality index. The set of avoid operations is fully customizable for RPG III programs and also for source codes written in RPG IV. So, organization standards can be applied. Recommendation of how to replace avoid operations with code that has the same funcionality is the responsibility of the organization.</p>
<p>Example(s):</p>
<pre><code>  C* RPG400-Reference-c0918170, Page 234, Figure 52
  C                     CLOSE*ALL                   17
  C   17                GOTO NOCOMP                     CLOSE FAILED
  C* :
  C* :
  C* :
  C           NOCOMP    TAG</code></pre>
<h4 id="FHRPG_COSURI">CHAIN operation should use resulting indicator</h4>
<p>Resulting indicators should be used on CHAIN oparations (NOT located in free-form) to automatically handle “end of file” and “record not found” errors without specifying further error-handling procedures.</p>
<p>Example(s):</p>
<pre><code>  FDDDLJNL7  UF   E           K DISK    INFSR(*PSSR) 
  C                   CHAIN      DDDLJNL7
   /free
          chain(en) foo bar;
   /end-free</code></pre>
<h4 id="FHRPG_COV">Call operand is a variable</h4>
<p>A variable was given as call operand that can complicate the source code, its readability, and the tracking process. Using a character literal as call operand makes the program more readable and understandandable.</p>
<p>Example(s):</p>
<pre><code>  D var             S             10a   inz('RPG1005')
  C                   call      var                   
  C                   MOVE      *on           *inlr   </code></pre>
<h4 id="FHRPG_CCO">Complete Conditional Operation Needed</h4>
<p>In RPG IV user can specify conditions without explicitly writing out the equivalents of ‘true’ or ‘false’. Adding these constant values to conditions make them more understandable and readable. Adding true or false to a condition reflects the idea behind it.</p>
<p>Example(s):</p>
<pre><code>   /free

      IF 4 &lt; 3 AND 5 = 4 OR 3 &lt; 2;
         signalMessage ('No rule violation');
      ELSEIF A = B OR C OR D;
         signalMessage ('Contains 2 rule violations');
      ELSEIF A;
         signalMessage ('Contains 1 rule violation');
      ELSE;
         signalError ('Key not defined');
      ENDIF;
 
   /end-free</code></pre>
<h4 id="FHRPG_FCSU">Figurative Constant Should Used</h4>
<p>In assignments and in initializations ‘’, ‘0’, ‘1’ literals can be used. RPG provides figurative constants to avoid possible errors coming from using these literals. Replace the literals with *BLANK, *OFF, or *ON.</p>
<p>Example(s):</p>
<pre><code>   * User groups                                                                                 
  D result          s               n 0 inz('0')                                      </code></pre>
<p><strong>“*SRCSTMT, *NODEBUGIO” Header Option Should Be Used</strong>: Cannot found the option(*SRCSTMT: *NODEBUGIO) entry in Control Specification. Using *SRCSTMT imply that line numbers cited in error statements will correspond correctly to the code. *NODEBUGIO prevents debug operations from stopping on I/O.</p>
<p>Example(s):</p>
<pre><code>  H datedit(*ymd)                                                                                
  H decedit(*jobrun)                                                                             
  H debug                                                                                        
  H option(*srcstmt) </code></pre>
<h4 id="FHRPG_FO">Forbidden operation</h4>
<p>A forbidden operation can be found in the source code. In calculation specification avoid using forbidden operations because they have a bad effect on quality index. The set of forbidden operations is fully customizable for RPG III programs and also for source codes written in RPG IV. So, organization standards can be applied. Recommendation of how to replace forbidden operations with code that has the same funcionality is the responsibility of the organization.</p>
<p>Example(s):</p>
<pre><code>  C* RPG400-Reference-c0918170, Page 234, Figure 52
  C                     CLOSE*ALL                   17
  C   17                GOTO NOCOMP                     CLOSE FAILED
  C* :
  C* :
  C* :
  C           NOCOMP    TAG</code></pre>
<h4 id="FHRPG_ISTWE">IF-ELSEIF Should Terminated With ELSE</h4>
<p>ELSE should be used after IF-ELSEIF structure as a defensive programming component. At least one ELSEIF have to occur in the strucutre.</p>
<p>Example(s):</p>
<pre><code>  FEWPCCR1   O    E             PRINTER USROPN           
  F                                     INFDS(WSFD01)   
  F                                     INFSR(*PSSR)     
  FEWPCCR2   O    E             PRINTER USROPN           
  F                                     INFDS(WSFD01)   
  F                                     INFSR(*PSSR)     
  C                   IF         RESULT = 0
  C                   OPEN      EWPCCR1   
  C                   ELSEIF     RESULT &gt; 0
  C                   OPEN      EWPCCR2
  C                   CLOSE     EWPCCR2
  C                   ENDIF
  C                   CLOSE     *ALL</code></pre>
<h4 id="FHRPG_ISNUI">If Should Not Use Indicators</h4>
<p>Besides using conditional expressions in IF statements, users can define dependencies on indicators. Using indicators as conditions results in poor logic and an intricate code, thus indicators should not be used in conditions.</p>
<p>Example(s):</p>
<pre><code>  C   99FLD1          IFEQ      FLD2
  C                   ENDIF </code></pre>
<h4 id="FHRPG_MEHFS">Missing Error Handling in F Spec</h4>
<p>During reading or writing files errors can occur. To handle such errors INFSR keyword should be added to File Description specification lines. INFSR specifies an error-handling subroutine by the given parameter (name of the subroutine). A default error-handling subroutine is *PSSR.</p>
<p>Example(s):</p>
<pre><code>  FIPBDCCP   IF   E           K DISK    INFSR(SUBC)                                              
  FIPBDCCD   IF   E           K DISK                                                             
  D result          S              8B 2                                                          
  C     SUBA          BEGSR                                                                      
  C                   EXSR      SUBC                                                             
  C                   MOVE      10            result                                             
  C                   ENDSR                                                                      
  C     SUBB          BEGSR                                                                      
  C                   EXSR      SUBA                                                             
  C                   ENDSR                                                                      
  C     SUBC          BEGSR                                                                      
  C                   EXSR      SUBB                                                             
  C                   ENDSR                                                                      
  C                   MOVEL     *on           *inlr                                              </code></pre>
<h4 id="FHRPG_UFSEC">USROPN Files Should Explicitly Closed</h4>
<p>A file defined in File Description Specification can be accessed many times from different places of the source code. Files can be used concurrently, thus a correct file handling mechanism is desired. After the OPEN operation is executed, users can read, update, and write files depending on how the file was specified in the File Description Specification. After a process is finished working with the file, it should close the file explicitly (in case of USROPN files).</p>
<p>Example(s):</p>
<pre><code>  FEWPCCR1   O    E             PRINTER USROPN           
  F                                     INFDS(WSFD01)   
  F                                     INFSR(*PSSR)     
  FEWPCCR2   O    E             PRINTER USROPN           
  F                                     INFDS(WSFD01)   
  F                                     INFSR(*PSSR)     
  C                   OPEN      EWPCCR1   
  C                   OPEN      EWPCCR2
  C                   CLOSE     EWPCCR2
  C                   CLOSE     *ALL</code></pre>
<h4 id="FHRPG_ESU">Use ENDxx instead of END</h4>
<p>In RPG, structured conrol operations can be used to group more statements into a block. These structures use the END statement to indicate the end of the block. Embedding numerous different blocks can be difficult to read. So, instead of END, ENDxx should be used to indicate the type of the structured operation wanted to be closed.</p>
<p>Example(s):</p>
<pre><code>  Dmyproc           pr                                                                           
  D $$a1            s              1                                                             
  D $loop           s              1                                                             
  C     *on           ifne      *off                                                             
  C                   movel     *on           $loop             1                                
  C                   else                                                                       
  C                   movel     *off          $loop             1                                
  C                   end                                                                        
  C                   return                                                                     </code></pre>
<h3 id="design-rules">Design Rules</h3>
<h4 id="FHRPG_SCC">Circular reference between subroutines</h4>
<p>Subroutines can call other subroutines. There is no barrier that prevents the presence of a circular reference between subroutine calls that may result in a infinite loop.</p>
<p>Example(s):</p>
<pre><code>  D result          S              8B 2                                                          
  C     SUBA          BEGSR                                                                      
  C                   EXSR      SUBC                                                             
  C                   MOVE      10            result                                             
  C                   ENDSR                                                                      
  C     SUBB          BEGSR                                                                      
  C                   EXSR      SUBA                                                             
  C                   ENDSR                                                                      
  C     SUBC          BEGSR                                                                      
  C                   EXSR      SUBB                                                             
  C                   ENDSR                                                                      
  C     SUBE          BEGSR                                                                      
  C                   EXSR      SUBF                                                             
  C                   ENDSR                                                                      
  C     SUBF          BEGSR                                                                      
  C                   EXSR      SUBE                                                             
  C                   ENDSR                                                                      
  C                   EXSR      SUBC                                                             
  C                   MOVEL     *on           *inlr                                              </code></pre>
<h4 id="FHRPG_DCI">Deep /COPY, /INCLUDE embededdness</h4>
<p>Too deep /COPY and/or /INCLUDE directives can be found in the code. In general, RPG programmers prefer using these directives only in single depth because the code remains readable and more maintainable. A program’s source can contain more than one /COPY or /INCLUDE operations, however included sources cannot contain further directives like these. This rule is only applied for RPG IV, because the compiler checks this property in RPG III. The maximal depth can be parameterized.</p>
<p>Example(s) (uses compiler listing format to show the copy):</p>
<pre><code>
     1  */copy FEARPG/HELLO                                                                           
     2  /copy FEARPG/qrpglesrc,hello                                                                  
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  HELLO                                                        * 
        * External name  . . . . . . :  FEARPG/QRPGLESRC(HELLO)                                     * 
        * Last change  . . . . . . . :  14.05.23  16:29:13                                           * 
        * Text 'description' . . . . :  TEST                                                         * 
        *--------------------------------------------------------------------------------------------*
     3+ /copy FEARPG/qrpglesrc,hello3                                                                 
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  HELLO3                                                       * 
        * External name  . . . . . . :  FEARPG/QRPGLESRC(HELLO3)                                    * 
        * Last change  . . . . . . . :  14.05.23  16:28:35                                           * 
        *--------------------------------------------------------------------------------------------*
     4+D constant        C                   const('repa')                                             
     5+D Add             pr            15s 2                                                           
     6+D num1                          15s 2                                                           
     7+D num2                          15s 2                                                           
     8 p Add             b                   export                                                    
     9 d Add             PI            15s 2                                                           
    10 d num1                          15s 2                                                           
    11 d num2                          15s 2                                                           
    12 d result          s              6s 0                                                           
    13  /free                                                                                          
    14         result = num1 + num2;                                                                   
    15         *inlr = *on;                                                                            
    16         return result;                                                                          
    17  /end-free                                                                                      
    18 p Add             e                                                                             </code></pre>
<h4 id="FHRPG_FSDE">Files should be defined externally</h4>
<p>To separate logic from data, it is a good strategy to use externally defined files in File Description Specification.</p>
<p>Example(s):</p>
<pre><code>
     FEPBLMSL2  IF   F  100        DISK    INFSR(*PSSR)                        </code></pre>
<h4 id="FHRPG_FPMK">First Parameter Must be KLIST</h4>
<p>First parameter must be KLIST when using a CHAIN, DELETE, READE, READPE, SETGT or SETLL operation.</p>
<p>Example(s):</p>
<pre><code>
     C     DEPTKY        KLIST
     C                   KFLD                    DEPT
     C                   KFLD                    SHIFT 
     
     C     DEPTKY        CHAIN     KYCUSTN                            20
     C     DEPT          CHAIN     KYCUSTN                            20 </code></pre>
<h4 id="FHRPG_LSA">Large static array</h4>
<p>A too large static array is used in the program that consumes a lot of memory. In many cases the array can be splitted into smaller disjoint pieces. Size of an array is checked in three different ways. The dimension of the array and the size of its elements (in bytes) can be limited. The product of these values can be limited independently (max size).</p>
<p>Example(s) (Example uses low bounds):</p>
<pre><code>
     DARC              S              3A   DIM(12)
     
     DINPARR           S             12A   DIM(6)
     IARRFILE   AA  01
     I                                  1   72  INPARR
     
     DARRX             S             12A   DIM(6)
     IARRFILE   AA  01
     I                                  1   12  ARRX(1)
     I                                 14   25  ARRX(2)
     I                                 27   38  ARRX(3)
     I                                 40   51  ARRX(4)
     I                                 53   64  ARRX(5)
     I                                 66   77  ARRX(6)
 </code></pre>
<h4 id="FHRPG_LCSDI">Line Count Should Defined in INFDS</h4>
<p>Line count information should be read from the data structure specified in the parameter of INFDS (in PRINTER files). Line count information can be read from positions 367-368.</p>
<p>Example(s):</p>
<pre><code>
     FCSO602R1  O    E             PRINTER USROPN 
     F                                     INFDS(WSFD01) 
     F                                     INFSR(*PSSR) 
     
     D WSFD01          DS 
     D  W1ST01           *STATUS 
     D  W1SPNO               123    124B 0 </code></pre>
<h4 id="FHRPG_NFSUNL">Non-Input Files Should Use No-Lock</h4>
<p>When accessing the records in files opened for update and output, the records are locked. When a longer process follows the read operation, it is intolerable that other processes have to wait for the input locked by another process. So, no-lock option should be specified on READxx and CHAIN operations to prevent such cases.</p>
<p>Example(s):</p>
<pre><code>
     FDDDLJNL7  UF   E           K DISK    INFSR(*PSSR) 
     C                   READ      DDDLJNL7</code></pre>
<h4 id="FHRPG_ONFSU">Odd Numeric Fields Should be Used</h4>
<p>Lossless memory allocation can be a good reason for using odd length numeric fields. In this case the extra memory block is not used for storing the sign of the numbers.</p>
<p>Example(s):</p>
<pre><code>
     DARC              S              6I   INZ(10)
     DINPARR           S             12P   INZ(523)
</code></pre>
<h3 id="documentation-rules">Documentation Rules</h3>
<h4 id="FHRPG_SSD">Subroutines Should be Documented</h4>
<p>Documentation on subroutines are strongly recommended to have an easy to understand code. It helps in performing later modification tasks. Documentation should be consistent with the subroutine’s functionality.</p>
<p>Example(s):</p>
<pre><code>
     D sfield          S             25A             
      /free                                          
            begsr suba;                              
            sfield = 'foobar';                       
            *inlr = *on;                             
          endsr;                                     
      /end-free                                      </code></pre>
<h4 id="FHRPG_ULCF">Uncommented Long Code Fragment</h4>
<p>A massive coherent code block contains no comment lines. Code blocks with high LLOC metric are subservient to have explanatory comments for the sake of easier comprehension. Modification of this code becomes easier and the source code will have a better maintainability index as well. The rule is applied for RPG III, RPG IV, and also for free-form blocks.</p>
<p>Example(s):</p>
<pre><code>     C* In this case, the value is set to 10.
     C* comment1
     C     CENTR         IFEQ      'Y'           IN12                                      
     C     CENTR         OREQ      'N'  
     C                   MOVE      'A'           *IN52  
     C                   ELSEIF    a + b
     C                             = 3
     C                   MOVE      'B'           *IN52   
     C                   elseif    c = 4
     C                   MOVE      'C'           *IN52   
     C                   MOVE      'D'           *IN52
     C                   ELSE
     C                   MOVE      'E'           IN11   
     C                   END                                           </code></pre>
<h3 id="naming-rules">Naming Rules</h3>
<h4 id="FHRPG_FPN">File uses prefixed name</h4>
<p>Externally defined files declared in File Specification can use names with a given prefix. By specifying a prefix on a file, the contained fields can be referenced by the appropriate prefix and the desired field name. Using prefixed names in this way improves ubderstandability. However, prefix keyword supports the replacement of the beginning of the original names with the prefix name which is undesired because it decreases readability and debug processes can also be longer. Prefix keyword can only be used in RPG IV.</p>
<p>Example(s):</p>
<pre><code>
     FEDITCUST  CF   E             WORKSTN INFDS(WSDS)
     FCUSTMAST  UF   E           K DISK    PREFIX('CUST1.')
     FCUSTNAME  IF   E           K DISK    PREFIX('CUST2.')
     
     DCUST1          E DS                  EXTNAME(CUSTMAST) QUALIFIED
     DCUST2          E DS                  EXTNAME(CUSTNAME) QUALIFIED

     C                   EXFMT     GETCUST
     C                   if        CSTNBR &gt; 0
     C     CSTNBR        Chain     CustMast       
     C                   endif
     C                   if        NOT %Found or CSTNBR = 0
     C     SearchName    SetLL     CustName        
     C                   if        %Equal
     C                   Read      CustName
     C     Cust2.CustNo  Chain     CustMast
     C                   endif
     C                   endif          
     C                   if        %Found(CustMast)  
      **  Got Customer record!                   
     C                   endif</code></pre>
<h4 id="FHRPG_CWLL">Lower case letter in the name of called program or procedure</h4>
<p>The compilation or execution can fail with an error when the operand of a call or callb operation is a literal that contains one ore more lower-case letters. Avoid this rule violation by using upper-case string literals.</p>
<p>Example(s):</p>
<pre><code>
     C                   CALL      'proga'
     C                   PARM                    FieldA
     C                   PARM                    FieldB</code></pre>
<h4 id="FHRPG_SNWNC">Subroutine Name Without Naming Convention</h4>
<p>It is a good approach to define a subroutine with an appropriate naming convention. By using naming conventions in the subroutines’ names we can add a grouping or mark identifiers referencing a subroutine’s name. Naming conventions can be controlled by using regular expression patterns.</p>
<p>Example(s):</p>
<pre><code>
     D sfield          S             25A             
      /free                                          
          begsr suba;                                
            sfield = 'foobar';                       
            *inlr = *on;                             
          endsr;                                     
          begsr SR01;                                
            sfield = 'foobar';                       
            *inlr = *on;                             
          endsr; 
      /end-free                                      </code></pre>
<h4 id="FHRPG_LVN">Too long name</h4>
<p>The declared variable name is too long. Using appropriate variable name length impoves the readability. In RPG III sources the variable name’s length is limited by the language syntax itself, but an additional upper limit can be added. In RPG IV one can use “unlimited” variable names in a definition or in a procedure specification. By defining different variable name lengths for different source code elements a fine-granularity can be achived in naming conventions. Naming groups are the following:</p>
<ul>
<li><p>array and table names</p></li>
<li><p>data structure names</p></li>
<li><p>data structure subfield names</p></li>
<li><p>standalone field names</p></li>
<li><p>named constant names</p></li>
<li><p>prototype and procedure interface namas</p></li>
<li><p>prototype and procedure interface parameter names</p></li>
<li><p>procedure names</p></li>
</ul>
<p>Example(s):</p>
<pre><code>
      * Source: http://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/c092508410.htm
      * Prototype for procedure FUNCTION
     D Fasdqweasd      PR            10I 0                    
     D    TERM1                       5I 0 VALUE
     D    TERM2                       5I 0 VALUE
     D    TERM3                       5I 0 VALUE
      
     P E               B                                      
      *-------------------------------------------------------------
      * This procedure performs a function on the 3 numeric values
      * passed to it as value parameters.
      *
      * This illustrates how a procedure interface is specified for a
      * procedure and how values are returned from a procedure.
      *-------------------------------------------------------------
     D E               PI            10I 0                    
     D    Term1                       5I 0 VALUE
     D    Term2                       5I 0 VALUE
     D    Term3                       5I 0 VALUE
     D Result          S             10I 0                    
      /free
         Result = Term1 ** 2 * 17
                      + Term2 * 7                             
                      + Term3;
         return Result * 45 + 23;
      /end-free
     P                 E                                      </code></pre>
<h4 id="FHRPG_SVN">Too short name</h4>
<p>The declared name is too short. In general, at least 3 character length variable names should be used. Using appropriate variable name length impoves the readability. In RPG sources the variable name’s length is limited by the language syntax itself, but an additional lower limit can be added. By defining different variable name lengths for different source code elements a fine-granularity can be achived in naming conventions. Naming groups are the following:</p>
<ul>
<li><p>array and table names</p></li>
<li><p>data structure names</p></li>
<li><p>data structure subfield names</p></li>
<li><p>standalone field names</p></li>
<li><p>named constant names</p></li>
<li><p>prototype and procedure interface namas</p></li>
<li><p>prototype and procedure interface parameter names</p></li>
<li><p>procedure names</p></li>
</ul>
<p>Example(s):</p>
<pre><code>
      * Source: http://publib.boulder.ibm.com/iseries/v5r2/ic2924/books/c092508410.htm
      * Prototype for procedure FUNCTION
     D F               PR            10I 0                    
     D    TERM1                       5I 0 VALUE
     D    TERM2                       5I 0 VALUE
     D    TERM3                       5I 0 VALUE
      
     P E               B                                      
      *-------------------------------------------------------------
      * This procedure performs a function on the 3 numeric values
      * passed to it as value parameters.
      *
      * This illustrates how a procedure interface is specified for a
      * procedure and how values are returned from a procedure.
      *-------------------------------------------------------------
     D E               PI            10I 0                    
     D    Term1                       5I 0 VALUE
     D    Term2                       5I 0 VALUE
     D    Term3                       5I 0 VALUE
     D Result          S             10I 0                    
      /free
         Result = Term1 ** 2 * 17
                      + Term2 * 7                             
                      + Term3;
         return Result * 45 + 23;
      /end-free
     P                 E                                      </code></pre>
<h3 id="security-rules">Security Rules</h3>
<h4 id="FHRPG_CSD">Copyright keyword should be defined in Control Specification</h4>
<p>Granting exclusive rights to the creator of the original work for its use and distribution can be achieved by defining copyright keyword in Control Specification (works only in RPG IV environment). Copyright information is granted by a maximum 256 long string that can be displayed by the operations DSPMOD, DSPPGM, or DSPSRVPGM.</p>
<p>Example(s):</p>
<pre><code>
     FIPBDCCP   IF   E           K DISK    INFSR(*PSSR)                                                                    
     FEP210     CF   E             WORKSTN INFSR(*PSSR)                                                                 
     F                                     SFILE(EP21003S:RELN03)                                                       
     FEP471R1   O    E             PRINTER INFSR(*PSSR)                                                              
     F                                     USROPN                                                                    
     F                                     INFDS(W1SF01)   </code></pre>
<h3 id="size-rules">Size Rules</h3>
<h4 id="FHRPG_DHTMS">Do block Has Too Many Statements</h4>
<p>Do block contains too many statements that harms the readabilty and understandabilty. Consdier extracting relevant code logic to a new subroutine or procedure.</p>
<p>Example(s):</p>
<pre><code>
     C     *inlr         doweq     *off                                                
     C                   exsr      pic01                                               
     C                   movel     0             res
     C                   movel     1             res
     C                   movel     2             res
     C                   movel     3             res
     C                   movel     4             res
     C                   movel     0             res
     C                   movel     1             res
     C                   movel     2             res
     C                   movel     3             res
     C                   movel     4             res
     C                   enddo                                                         </code></pre>
<h4 id="FHRPG_IHTMS">If block Has Too Many Statements</h4>
<p>If block contains too many statements that harms the readabilty and understandabilty. Consdier extracting relevant code logic to a new subroutine or procedure.</p>
<p>Example(s):</p>
<pre><code>
     C     *inlr         ifeq      *off                                                
     C                   exsr      pic01                                               
     C                   movel     0             res
     C                   movel     1             res
     C                   movel     2             res
     C                   movel     3             res
     C                   movel     4             res
     C                   movel     0             res
     C                   movel     1             res
     C                   movel     2             res
     C                   movel     3             res
     C                   movel     4             res
     C                   endif                                                         </code></pre>
<h4 id="FHRPG_WBWTMS">WHEN Branch With Too Many Statements</h4>
<p>In a WHEN branch of the SELECT statement, there are too many statements. By specifying many statements in such structures can easily cause the phenomenon called “Spaghetti Code”. Try to extract these statements into a subroutine or procedure.</p>
<p>Example(s):</p>
<pre><code>
     C                   SELECT
     C                   WHEN      X=1
     C                   MOVE      A             B
     C                   MOVE      C             D
     C                   MOVE      E             F
     C                   MOVE      J             K
     C                   MOVE      L             M
     C                   WHEN      X=2
     C                   MOVE      N             O
     C                   ENDSL</code></pre>
<h3 id="type-rules">Type Rules</h3>
<h4 id="FHRPG_IMO">Numeric operands of MOVE(L) are not compatible</h4>
<p>The operands of MOVE(L) are not compatible, thus precision problems may occur during assignment. The following numeric types will be checked:</p>
<ul>
<li><p>Binary (B)</p></li>
<li><p>Float (F)</p></li>
<li><p>Integer (I)</p></li>
<li><p>Packed-Decimal (P)</p></li>
<li><p>Unsigned (U)</p></li>
<li><p>Zoned-Decimal (Z)</p></li>
</ul>
<p>The compiler will not mark all the conversion and precision issues. In the business segment a little precision difference in decimal positions can be fatal. To avoid these kinds of errors, use numeric values with the right lenght and type.</p>
<p>Example(s):</p>
<pre><code>
     D num1            S              4B 2 inz(11.22) 
     D num2            S              5B 3 inz(99.999)
     C                   MOVE      num1          num2 
     C                   MOVE      *on           *inlr</code></pre>
<h3 id="unnecessary-and-unused-code-rules">Unnecessary and Unused Code Rules</h3>
<h4 id="FHRPG_CRS">Commented RPG statement</h4>
<p>A probable RPG operation is found in the specified comment line. Using comment lines in code aims to help the intelligibility. Undesired operations should be romeved from the code. In a native RPG environment these commented operations can be the source of misunderstanding because the programmers cannot see the asterisk at the beginning of the line. Highlighting a comment line containing RPG operations may worth some extra characters. So, predefined patterns can be applied for marking a commented RPG operation. The set of operations are different according to the program’s version.</p>
<p>Example(s):</p>
<pre><code>
     C*    CENTR         ANDLT     'Y'           IN12                                      
     C     CENTR         IFEQ      'Y'           IN12                                      
     C     CENTR         OREQ      'N'  
     C                   MOVE      'A'           *IN52  
     C                   ELSEIF    a + b
     C                             = 3
     C                   MOVE      'B'           *IN52   
     C                   elseif    c = 4
     C                   MOVE      'C'           *IN52   
     C                   MOVE      'D'           *IN52
     C                   ELSE
     C                   MOVE      'E'           IN11   
     C                   END                                           </code></pre>
<h4 id="FHRPG_BNE">Conditional expression is always false</h4>
<p>RPG contains many statements for specifying the control flow of a program upon a condition. If the given conditional expression only contains character literals, numeric literals and named constants we can evaluate these expressions and check whether the condition returns false. In this cases the conditional branch is unused and unnecessary, so the unrelevant branch can be removed from the conditional statement.</p>
<p>Example(s):</p>
<pre><code>
     D Max_Occur       C                   CONST(2.5)
     D Min_Occur       C                   CONST(2.6)
     C     Min_Occur     IFEQ      Max_Occur
     C                   MOVE      'B'           IN11
     C                   ENDIF
     C     1             IFEQ      2
     C*                  ...
     C                   ENDIF
     C     2             IFLT      1
     C*                  ...
     C                   ENDIF
     C     '1'           IFNE      '1'
     C*                  ...
     C                   ENDIF
</code></pre>
<h4 id="FHRPG_US">Subroutine is never called</h4>
<p>The source code contains a subroutine that is never called. By eliminating unused subroutines the size of the code can be decreased, and the readability can be improved. The initialization subroutine is not taken into consideration since it is called implicitly.</p>
<p>Example(s):</p>
<pre><code>
     D sfield          S             25A    
      /free                                 
          begsr suba;                       
            sfield = 'foobar';              
            *inlr = *on;                    
          endsr;                            
      /end-free                             </code></pre>
<h4 id="FHRPG_UV">Unused variable</h4>
<p>Variables are declared in the source code, but never used. Unused variables are unnecessary in the program. By removing such variables, the size of the code will decrease and the readability will improve as well. In RPG environment we consider the following source code elements as variables:</p>
<ul>
<li><p>data structrue</p></li>
<li><p>data structure subfield</p></li>
<li><p>standalone field</p></li>
<li><p>named constant</p></li>
<li><p>variables defined by a define</p></li>
<li><p>arrays and tables defined in Extension Specification</p></li>
</ul>
<p>Example(s):</p>
<pre><code>
     Dconstant         C                   const('constanttext')   
      /free                                                        
          *inlr = *on;                                             
      /end-free                                                    
</code></pre>
<h4 id="FHRPG_VUIUS">Variable only referenced from an unused subroutine</h4>
<p>The source code contains variables that are only referenced from a subroutine. However, the appropriate subroutine is never called from the program, so the variable’s value is never changed. Consider the elimination of the affected variable and subroutine. Variables only used in the initialization subroutine (*INZSR) are not cause a rule violation.</p>
<p>Example(s):</p>
<pre><code>
     D sfield          S             25A
      /free                             
          begsr suba;                   
            sfield = 'foobar';          
            *inlr = *on;                
          endsr;                        
      /end-free                         </code></pre>
<h2 id="the-userdefinedmetrics-module">The UserDefinedMetrics module</h2>
<p>In addition to the built-in metrics, users can create their own metrics by using the UserDefinedMetrics (UDM) module. These new metrics can be established with a formula that can use any previous SourceMeter metric and can even depend on other custom user-defined metrics.</p>
<h3 id="defining-a-metric">Defining a metric</h3>
<ul>
<li>Metric definitions are surrounded by a <code>&lt;tool name = &quot;UDM&quot; enabled = &quot;true&quot;&gt;&lt;/tool&gt;</code> tag.</li>
<li>Metrics are defined using a <code>&lt;udm id = &quot;NAME&quot;&gt;&lt;/udm&gt;</code> tag.
<ul>
<li><code>NAME</code> follows standard identifier conventions (starts with a letter or an underscore, followed by any number of letters, numbers, or underscores).</li>
<li><code>pi</code>, <code>epsilon</code>, and <code>inf</code> are occupied names (in a case-insensitive manner, so <code>Pi</code>, <code>pI</code>, <code>Epsilon</code>, <code>epSiloN</code>, etc. are occupied as well).</li>
</ul></li>
<li>Each metric definition can contain multiple configurations using a <code>&lt;configuration name = &quot;ConfigName&quot;&gt;&lt;/configuration&gt;</code> tag.
<ul>
<li>The <code>Default</code> configuration is mandatory, while the language-specific “overrides” are optional.</li>
<li>Each “override” inherits its starting setting values from the <code>Default</code> configuration.</li>
<li>The valid language-specific configuration values (at the moment) are <code>cpp</code>, <code>csharp</code>, <code>java</code>, <code>javascript</code>, <code>python</code>, and <code>rpg</code>.</li>
</ul></li>
<li>Each configuration can contain the following settings:
<ul>
<li><code>description</code>: The description of the metric (default: “”).</li>
<li><code>display-name</code>: An optional name, if something other than the ID should be used for display (default: “”).</li>
<li><code>group-member</code>: The group of metrics this metric belongs to (valid values: “Cohesion”, “Complexity”, “Coupling”, “Documentation”, “Inheritance”, “Size”, “UserDefinedMetrics”; default: “UserDefinedMetrics”)</li>
<li><code>help-text</code>: Additional help text for the metric (default: “”).</li>
<li><code>formula</code>: The formula used to calculate the value of the metric. It can be any valid expression supported by the <a href="https://exprtk.codeplex.com/">ExprTk library</a> and contain references to any previously computed metrics (e.g., LLOC, NOS, CBO, etc.).</li>
<li><code>type</code>: The desired output type of the formula (valid values: “Integer”, “Float”; default: “Float”).</li>
<li><code>calculated</code>: This field contains a list of syntactic element types (e.g., Class, Method, etc.) the metric is calculated for inside <code>&lt;calculated-for&gt;</code> tags. See the example below.
<ul>
<li>Note that every (both built-in and user-defined) metric has a unique set of elements it is computed for. Therefore, if a metric is dependent on another, its <code>&lt;calculated-for&gt;</code> set should be a subset of the dependency’s for it to be universally computable.</li>
</ul></li>
</ul></li>
</ul>
<h3 id="example-profile.xml">Example profile.xml</h3>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;?xml</span> version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;<span class="kw">?&gt;</span>
<span class="kw">&lt;sourcemeter-profile&gt;</span>
  <span class="kw">&lt;tool-options&gt;</span>
    <span class="kw">&lt;tool</span><span class="ot"> name</span> <span class="ot">=</span> <span class="st">&quot;UDM&quot;</span><span class="ot"> enabled</span> <span class="ot">=</span> <span class="st">&quot;true&quot;</span><span class="kw">&gt;</span>
      <span class="kw">&lt;udm</span><span class="ot"> id</span> <span class="ot">=</span> <span class="st">&quot;UDM_test_metric&quot;</span><span class="kw">&gt;</span>
        <span class="kw">&lt;configuration</span><span class="ot"> name</span> <span class="ot">=</span> <span class="st">&quot;Default&quot;</span><span class="kw">&gt;</span>
          <span class="kw">&lt;description&gt;</span>Blablabla<span class="kw">&lt;/description&gt;</span>
          <span class="kw">&lt;display-name&gt;</span>UDM Test Metric<span class="kw">&lt;/display-name&gt;</span>
          <span class="kw">&lt;group-member&gt;</span>UserDefinedMetrics<span class="kw">&lt;/group-member&gt;</span>
          <span class="kw">&lt;help-text&gt;</span>A helpful comment<span class="kw">&lt;/help-text&gt;</span>
          <span class="kw">&lt;formula&gt;</span>LLOC + 1 + sin(pi)^3<span class="kw">&lt;/formula&gt;</span>
          <span class="kw">&lt;type&gt;</span>Integer<span class="kw">&lt;/type&gt;</span>
          <span class="kw">&lt;calculated&gt;</span>
            <span class="kw">&lt;calculated-for&gt;</span>Class<span class="kw">&lt;/calculated-for&gt;</span>
            <span class="kw">&lt;calculated-for&gt;</span>Method<span class="kw">&lt;/calculated-for&gt;</span>
          <span class="kw">&lt;/calculated&gt;</span>
        <span class="kw">&lt;/configuration&gt;</span>
      <span class="kw">&lt;/udm&gt;</span>
    <span class="kw">&lt;/tool&gt;</span>
  <span class="kw">&lt;/tool-options&gt;</span>
<span class="kw">&lt;/sourcemeter-profile&gt;</span></code></pre>
<h2 id="the-userdefinedpatterns-module">The UserDefinedPatterns module</h2>
<p>As opposed to the UserDefinedMetrics module, where extra values could be calculated from already existing metrics, this module offers a way to tag source code elements (or a constellation of source code elements) that satisfy a certain set of arbitrary criteria. The use originally intended for this module is matching object-oriented design pattern and antipattern instances – but it can be used for discovering (or enforcing) any occurrence that can be expressed through the Language Independent Model the toolchain uses under the hood. Example pattern configurations for the most widespread design- and antipatterns can be found in <code>(Windows/Linux)Tools/Patterns</code>.</p>
<h3 id="usage-1">Usage</h3>
<p>The module can be activated with a single extra switch (<code>-pattern=value</code>) to the toolchain. It can either be a single pattern, or a folder containing multiple patterns. Patterns can either be declarative (.yaml, .xml, or .json files), or procedural (.py python scripts), and in the case of folders, can be mixed arbitrarily. The declarative way is easier and possibly drier than writing code, so this is the primary entry point for users wishing to express a pattern It has its limitations, though, as the low-level formulas that do the actual matching can only use data that already exists in the model.</p>
<p>If a pattern needs extra calculations on the fly, it can use the procedural interface, and with it the full expressive capabilities of the python language. A binding interface is provided so that the python code can interact with the source code elements being visited so that it can calculate its own intermediary values and evaluate its own criteria. The binding also makes it possible for the pattern code to publish new values to the graph, as well as the main matches – thereby covering the expressive capabilities of the UserDefinedMetrics tool as well.</p>
<h3 id="an-example-pattern">An example pattern</h3>
<p>To get an idea how the two methods work, let’s consider an example first. If we wanted to discover instances of the <a href="https://refactoring.guru/design-patterns/singleton">Singleton</a> design pattern, we could phrase our requirements along the lines of:</p>
<ul>
<li>A class with only non-public constructors.</li>
<li>A private static member attribute whose type is the class itself.</li>
<li>A public static member function whose return type is the class itself.</li>
</ul>
<p>When a class satisfying all these conditions is found, we expect an output like the following:</p>
<pre class="txt"><code>Pattern 'Singleton' has been found on 'SingletonExample'
Source : path/to/file.cpp [8,39,5,6]
Role 'SingletonClass' fits on 'SingletonExample' (nodeid '107'), path/to/file.cpp [8,39,5,6]</code></pre>
<p>Additionally, this information would be tagged on the appropriate graph node, and be a part of the official output of the toolchain. Since the requirements of the Singleton pattern are relatively simple, we can start with the declarative method.</p>
<h3 id="the-declarative-method">The declarative method</h3>
<p>A usual pattern description consists of some metadata (pattern name, what kind of source code element we’re looking for, what it is called within the pattern, etc.) and then a set of conditions we want to check. These conditions can be:</p>
<ul>
<li>Formulas, that are checked against the node in question.</li>
<li>Context switches, where we can travel from the current node to another by the edges defined in the LIM model. For this, we can specify the edge to travel, the direction to travel in, the kinds of nodes we want to enumerate on the other end, what name we want to refer to these end nodes, and some nested conditions we want to match against them.</li>
<li>Logical combinations, as in “and”, “or”, etc., where we can combine multiple formulas or context switches.</li>
</ul>
<p>The best way to dive into the language is through an example. We could use either yaml, xml, or json, but yaml will be considered the default from now on. So, following the above guidelines, the Singleton description (with some additional, verbose annotation) would look something like this:</p>
<pre class="sourceCode yaml"><code class="sourceCode yaml"><span class="co"># we start by specifying the relevant metadata</span>
<span class="co"># the names `name`, `kind`, `role`, etc. are all keywords so matches can automatically have their metadata added to them in the graph</span>
<span class="fu">name :</span> Singleton
<span class="fu">kind :</span> ndkClass
<span class="fu">role :</span> SingletonClass
<span class="fu">category:</span> DesignPattern
<span class="fu">priority:</span> Info
<span class="fu">description:</span> Application needs one, and only one, instance of an object. Additionally, lazy initialization and global access are necessary.
<span class="fu">displayName:</span> Singleton

<span class="co"># and then move on to the conditions we want to match</span>
<span class="fu">conditions:</span>

  <span class="co"># the &quot;instance&quot; condition, where we check that the class has a private static attribute whose type is the class itself</span>
  <span class="co"># this is implemented using a context switch to the class' member attributes, and then 3 nested conditions to check if the attribute is private, static, and matches the type of the class</span>
  <span class="co"># the context switch is an `any`, since we're already happy if at least one attribute satisfies our nested conditions -- but we could also use the other two context switches, `all` and `exists`</span>
  <span class="co"># everything we name in the `role` clause can then be used as a variable in any further condition</span>
  <span class="co"># note that `accessibility` and `isStatic` are built-in node characteristics from LIM, and ndkAttribute/ackPrivate are LIM constants</span>
  <span class="co"># to help bridge the divide between the logical and type hierarchies, we can refer to a node's type using the &quot;node.type&quot; shorthand</span>
  <span class="kw">-</span> <span class="fu">any :</span>
      <span class="fu">direction :</span> forward
      <span class="fu">edge :</span> edkScope_HasMember
      <span class="fu">kind :</span> ndkAttribute
      <span class="fu">role :</span> attr1* <span class="co"># the trailing asterisk means that we don't want to include this attribute among the results</span>
      <span class="fu">conditions :</span>
        <span class="kw">-</span> accessibility == ackPrivate
        <span class="kw">-</span> isStatic == true
        <span class="kw">-</span> type == SingletonClass.type
  <span class="co"># the &quot;getInstance&quot; condition, where we check that the class has a public static method that returns the class type</span>
  <span class="co"># implementation is nearly identical to the above, only now we check ndkMethods instead of ndkAttributes</span>
  <span class="co"># the `filter` clause pre-filters which nodes the subsequent conditions apply to -- in this case, we are only looking for a normal method (so, not a constructor or destructor)</span>
  <span class="kw">-</span> <span class="fu">any :</span>
      <span class="fu">direction :</span> forward
      <span class="fu">edge :</span> edkScope_HasMember
      <span class="fu">type :</span> ndkMethod
      <span class="fu">role :</span> m1*
      <span class="fu">filters:</span>
        <span class="kw">-</span> methodKind == mekNormal
      <span class="fu">conditions :</span>
        <span class="kw">-</span> isStatic == true
        <span class="kw">-</span> accessibility == ackPublic
        <span class="kw">-</span> returnType == SingletonClass.type
  <span class="co"># and finally the &quot;constructor&quot; condition, where we check that none of the class' contructors are public</span>
  <span class="co"># here we use the `all` context switch because we need to make sure that all constructors match our non-public requirement</span>
  <span class="co"># we also encounter the `or` combination condition to round out condition kinds (the others are `and`, and `not`)</span>
  <span class="kw">-</span> <span class="fu">all :</span>
      <span class="fu">direction :</span> forward
      <span class="fu">edge :</span> edkScope_HasMember
      <span class="fu">kind :</span> ndkMethod
      <span class="fu">role :</span> m2*
      <span class="fu">filters:</span>
        <span class="kw">-</span> methodKind == mekConstructor
      <span class="fu">conditions:</span>
        <span class="kw">-</span> <span class="fu">or :</span>
          <span class="kw">-</span> accessibility == ackPrivate
          <span class="kw">-</span> accessibility == ackProtected
  <span class="co"># multiple conditions inside a `conditions` clause are implicitly joined by `and`, so all three of the above conditions must be met for a class to be considered an instance of the Singleton pattern</span></code></pre>
<p>With the mixture of formulas, context switches, and logical combinations, many patterns can be described.</p>
<h3 id="declarative-reference">Declarative reference</h3>
<p>The basic analysis procedure usually leads to the following artifacts (among others) in increasing abstraction: Source code, language-specific model (ASG), language-independent model (LIM), result graph (graph). Since we are in language-independent territory here, the ASG does not concern us; but both the LIM and the graph are worth becoming familiar with, to help us fully utilize the capabilities of the pattern matching process.</p>
<p>LIM can be mostly thought of as the Object-oriented design level view of the whole system. It contains packages, classes, methods, attributes, and appropriate connections (edges) among these (for a full list of nodes and edges, please refer to the LIM introduction). It is a “lossy” conversion from the ASG, as the internals of the methods (so every statement, expression, local variable, etc.) is lost. But the overall structure remains, which is the important part for pattern detection.</p>
<p>The graph, on the other hand, is the result structure (the main output, so to speak) of the analysis process. It contains not only the corresponding nodes from the LIM, but also computed values like numeric metrics, source code position-based warnings, and other metadata to facilitate its many visual representations later. Pattern matches we discover also go onto the graph in the form of positioned warnings (possibly spanning across multiple nodes if the pattern has multiple roles). Additionally, we can use the graph as an “input” as well, and incorporate previously calculated values into the formulas of our pattern matching.</p>
<p>With this in mind, let’s see what the declarative method can offer us:</p>
<h4 id="metadata-reference">Metadata reference:</h4>
<ul>
<li><code>name</code> (<strong>required</strong>) : The name of the pattern, its value is scalar (string/text).</li>
<li><code>kind</code> (<strong>required</strong>) : The kind of the LIM node where the pattern matching begins, its value is scalar (string/text), refer to LIM’s <code>NodeKind</code>.</li>
<li><code>role</code> (<strong>required</strong>) : The name of the matched pattern on the given node, its value is scalar (string/text).</li>
<li><code>category</code> : Metadata for generating a rule for the pattern on the Graph, its value is scalar (string/text) [<strong>DesignPattern</strong>/<strong>AntiPattern</strong>/<strong>CustomPatternName</strong>]. By default its value is <strong>DesignPattern</strong>.</li>
<li><code>priority</code> : Metadata for generating a rule for the pattern on the Graph, its value is scalar (string/text) [<strong>Info</strong>, <strong>Minor</strong>, <strong>Major</strong>, <strong>Critical</strong>, <strong>Blocker</strong>]. By default its value is <strong>Info</strong>.</li>
<li><code>description</code> : Metadata for generating a rule for the pattern on the Graph. The description of the pattern.</li>
<li><code>displayName</code> : Metadata for generating a rule for the pattern on the Graph. The name of the pattern that will be visible in 3rd party programs.</li>
<li><code>filters</code> : Its value is a sequence, each entry is a condition. It filters the node, and only checks the conditions if the node satisfies the conditions described by the filter.</li>
<li><code>conditions</code> : Its value is a sequence, each entry is a condition. If this is not defined, the pattern matching will return true by default.</li>
</ul>
<h4 id="context-switches">Context switches:</h4>
<ul>
<li><code>all</code>/<code>any</code> : Pattern matching returns true, if all/any of the conditions are matching, its values are maps (key/value pairs):</li>
<li><code>direction</code> : Sets the direction of the visiting, its value is scalar (string/text) [<strong>forward</strong>, <strong>reverse</strong>]. By default its value is <strong>forward</strong>.</li>
<li><code>from</code> : The starting node of the visiting, its value is scalar (string/text), can contain a roleName or/and class/type/parent hierarchy helpers (e.g., <code>from : myRoleName.parent.type</code>). By default its value is <strong>this</strong> (current node)</li>
<li><code>edge</code> (<strong>required</strong>) : The name of the edge, its value is scalar (string/text), refer to LIM’s <code>EdgeKind</code>.</li>
<li><code>kind</code> (<strong>required</strong>) : The kind of the LIM node where the pattern matching begins, its value is scalar (string/text), refer to LIM’s <code>NodeKind</code>.</li>
<li><code>role</code> (<strong>required</strong>) : The name of the matched pattern on the given node, its value is scalar (string/text).</li>
<li><code>filters</code> (not-required)</li>
<li><code>conditions</code> (not-required)</li>
</ul>
<h4 id="logical-combinations">Logical combinations:</h4>
<ul>
<li><code>or</code> : Its value is a sequence, each entry is a condition (or a hierarchy switch). Returns true if any condition under it returns true.</li>
<li><code>and</code> : Its value is a sequence, each entry is a condition (or a hierarchy switch). Returns true if every condition under it returns true.</li>
<li><code>xor</code> : Its value is a sequence, each entry is a condition (or a hierarchy switch). Returns true if the number of true conditions under it is an odd number.</li>
<li><code>not</code> : Negate a single condition</li>
<li><code>nor</code> : Like “or” but negated</li>
<li><code>nand</code> : Like “and” but negated</li>
<li><code>exists</code> : Its values are maps (key/value pairs), checks whether the given edge exists on the given node or not:</li>
<li><code>direction</code> : Sets the direction of the visiting, its value is scalar (string/text) [<strong>forward</strong>, <strong>reverse</strong>]. By default its value is <strong>forward</strong>.</li>
<li><code>from</code> : The starting node of the visiting, its value is scalar (string/text), can contain a roleName or/and class/type/parent hierarchy helpers (eg., <code>from : myRoleName.parent.type</code>). By default its value is <strong>this</strong> (current node)</li>
<li><code>edge</code> (<strong>required</strong>) : The name of the edge, its value is scalar (string/text), refer to LIM’s <code>EdgeKind</code>.</li>
</ul>
<h4 id="list-of-exact-formula-capabilities">List of exact formula capabilities</h4>
<p>Any value that is available on the Graph. Refer to the whole documentation for what various tools output to the graph, and how. We recommend looking into the <a href="#reference-of-source-code-metrics">Source Code Metrics</a> first. Referable LIM values:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Reference name</th>
<th style="text-align: left;">Return type</th>
<th style="text-align: center;">FileSystem</th>
<th style="text-align: center;">File</th>
<th style="text-align: center;">Package</th>
<th style="text-align: center;">Component</th>
<th style="text-align: center;">Scope</th>
<th style="text-align: center;">Class</th>
<th style="text-align: center;">Attribute</th>
<th style="text-align: center;">Method</th>
<th style="text-align: center;">Parameter</th>
<th style="text-align: center;">Type</th>
<th style="text-align: center;">Every Node</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">id</td>
<td style="text-align: left;">int</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: left;">Returns the ID of the node as a number</td>
</tr>
<tr class="even">
<td style="text-align: left;">parameterSize</td>
<td style="text-align: left;">int</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Returns the number of parameter the method has</td>
</tr>
<tr class="odd">
<td style="text-align: left;">isStatic</td>
<td style="text-align: left;">bool</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Returns true/false if the LIM node is static</td>
</tr>
<tr class="even">
<td style="text-align: left;">isVirtual</td>
<td style="text-align: left;">bool</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Returns true/false if the LIM node is virtual</td>
</tr>
<tr class="odd">
<td style="text-align: left;">isAbstract</td>
<td style="text-align: left;">bool</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Returns true/false if the LIM node is abstract</td>
</tr>
<tr class="even">
<td style="text-align: left;">isAnonymous</td>
<td style="text-align: left;">bool</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Returns true/false if the LIM node is anonymous</td>
</tr>
<tr class="odd">
<td style="text-align: left;">accessibility</td>
<td style="text-align: left;">string</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Returns the accessibility <code>AccessibilityKind</code> as a text</td>
</tr>
<tr class="even">
<td style="text-align: left;">classKind</td>
<td style="text-align: left;">string</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Returns the kind of a class <code>ClassKind</code> as a text</td>
</tr>
<tr class="odd">
<td style="text-align: left;">methodKind</td>
<td style="text-align: left;">string</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Returns the kind of a method <code>MethodKind</code> as a text</td>
</tr>
<tr class="even">
<td style="text-align: left;">name</td>
<td style="text-align: left;">string</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Returns the name of the node as a text</td>
</tr>
<tr class="odd">
<td style="text-align: left;">kind</td>
<td style="text-align: left;">string</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: left;">Returns the kind of a node <code>NodeKind</code> as a text</td>
</tr>
<tr class="even">
<td style="text-align: left;">paramKind</td>
<td style="text-align: left;">string</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Returns the kind of a parameter <code>ParameterKind</code> as a text</td>
</tr>
<tr class="odd">
<td style="text-align: left;">simpleTypeKind</td>
<td style="text-align: left;">string</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Returns the type of a simpleKind <code>SimpleTypeKind</code> as a text</td>
</tr>
<tr class="even">
<td style="text-align: left;">pointerKind</td>
<td style="text-align: left;">string</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: left;">Returns the kind of a <code>PointerKind</code> as a text</td>
</tr>
<tr class="odd">
<td style="text-align: left;">returnType</td>
<td style="text-align: left;">LIM::Node</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">A logical::Type node of the method returns</td>
</tr>
<tr class="even">
<td style="text-align: left;">type</td>
<td style="text-align: left;">LIM::Node</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">A logical::Type node</td>
</tr>
<tr class="odd">
<td style="text-align: left;">class</td>
<td style="text-align: left;">LIM::Node</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: left;">A logical::Class node</td>
</tr>
<tr class="even">
<td style="text-align: left;">parent</td>
<td style="text-align: left;">LIM::Node</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;">X</td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: left;">A logical::… node of the parent</td>
</tr>
</tbody>
</table>
<p>With these values, arbitrary expressions can be created using basic arithmetic operators (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>) and boolean comparisons (<code>==</code>, <code>!=</code>, <code>~=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>).</p>
<h4 id="commonly-used-context-switches">Commonly used context switches</h4>
<ul>
<li><code>edkScope_HasMember</code> : from classes to member methods/attributes (and back).</li>
<li><code>edkClass_IsSubclass</code> : from classes to their descendants (and back).</li>
<li><code>edkMethod_HasParameter</code> : from methods to their parameters (and back).</li>
<li>…for a complete list, refer to the LIM introduction post.</li>
</ul>
<h3 id="a-more-complex-pattern">A more complex pattern</h3>
<p>There can be instances, however, where the declarative method is just not expressive enough. For example, when we need more complex combinations than “any” or “all”. Or when a temporary value needs to be computed before a condition could be evaluated.</p>
<p>An example taking advantage of this increased expressive power is the <a href="https://refactoring.guru/smells/feature-envy">Feature Envy</a> antipattern, where our match requirement can be summarized like the following:</p>
<ul>
<li>First, we need to calculate the occurrences of local and foreign attribute accesses.</li>
<li>Then the condition is to check whether there are “enough” attribute accesses, and if so, whether the percentage of foreign accesses is above a certain threshold.</li>
</ul>
<h3 id="the-procedural-method">The procedural method</h3>
<p>For these cases, there’s also a python binding for the whole pattern matching process, where a custom python script can access the source code elements through a standardized node interface. This interface provides ways to read the same values, to switch contexts through the same edges, or to manually place pattern matches on the graph. But on top of this, it also provides free reign to calculate arbitrary values, iterate subsets, perform conditional execution, etc. A script for Feature Envy would look something like this:</p>
<pre class="py"><code># the same metadata, only now in the form of &quot;global&quot; variables
name = &quot;featureEnvy&quot;
role = &quot;envyMethod&quot;
kind = &quot;ndkMethod&quot;
priority = &quot;Minor&quot;
category = &quot;AntiPattern&quot;
displayName = &quot;Feature Envy&quot;
description = &quot;A method accesses the data of another object more than its own data.&quot;

# the `visit` method is the entry point for the pattern matching, which is called for each node of the appropriate type
# nodes here are of a special NodeBinding type that allows python access to everything we've seen from the declarative section
# only now, we can use that data to perform arbitrary calculations
def visit(node):
    parent = node.getParent()
    localAccess = 0
    foreignAccess = 0
    # context switches are now done using the `traverse` method
    for methodAccAttr in node.traverse(edge = &quot;edkMethod_AccessesAttribute&quot;, reverse = False):
        for attrAccAttr in methodAccAttr.traverse(edge = &quot;edkAttributeAccess_Attribute&quot;, reverse = False):
            for methodUsesThisClass in attrAccAttr.traverse(edge = &quot;edkScope_HasMember&quot;, nodeKind = &quot;ndkClass&quot;, reverse = True):
                # but once the destination is reached, we can increment counters
                if parent == methodUsesThisClass:
                    localAccess += 1
                else:
                    foreignAccess += 1
    
    # if the number of attribute accesses surpasses a certain limit (5, in this case), and at least 80% of those were directed towards a foreign attribute, we officially call the class &quot;envious&quot;
    if (localAccess + foreignAccess &gt;= 5) and (foreignAccess / (foreignAccess + localAccess) &gt;= 0.8) :
        node.setWarning(patternName = name, roleName = role, category = category, description = description, displayName = displayName, priority = priority)</code></pre>
<p>Of course, anything that could be done with the declarative method can also be done using the procedural method. As an illustration, the Singleton pattern from above could be rewritten like so:</p>
<pre class="py"><code>name = &quot;Singleton&quot;
role = &quot;Singleton&quot;
kind = &quot;ndkClass&quot;
category = &quot;DesignPattern&quot;
priority = &quot;Info&quot;
description = &quot;Application needs one, and only one, instance of an object. Additionally, lazy initialization and global access are necessary.&quot;
displayName = &quot;Singleton&quot;

def visit(node):

  hasInstance = False
  for attr1 in node.traverse(&quot;edkScope_HasMember&quot;, nodeKind = &quot;ndkAttribute&quot;):
    if attr1.getValue(&quot;accessibility&quot;) == &quot;ackPrivate&quot; and attr1.getValue(&quot;isStatic&quot;) == True and attr1.type_equals(node):
      hasInstance = True
      break

  getInstance = False
  for m1 in node.traverse(&quot;edkScope_HasMember&quot;, nodeKind = &quot;ndkMethod&quot;):
    if m1.getValue(&quot;methodKind&quot;) == &quot;mekNormal&quot; and m1.getValue(&quot;accessibility&quot;) == &quot;ackPublic&quot; and m1.getValue(&quot;isStatic&quot;) == True and m1.type_equals(node):
      getInstance = True
      break

  constr = True
  for m2 in node.traverse(&quot;edkScope_HasMember&quot;, nodeKind = &quot;ndkMethod&quot;):
    if m2.getValue(&quot;methodKind&quot;) != &quot;mekConstructor&quot;: continue
    if m2.getValue(&quot;accessibility&quot;) == &quot;ackPublic&quot;:
      constr = False
      break

  if hasInstance and getInstance and constr:
    node.setWarning(name, role, displayName, category, priority, description)</code></pre>
<h3 id="procedural-reference">Procedural reference</h3>
<p>There are two distinguished top-level names for pattern-matching python scripts:</p>
<ol type="1">
<li><code>kind</code>: which is the same as the top-level <code>kind</code> attribute was for the declarative method, namely it pre-filters the node kinds being visited when checking for this pattern.</li>
<li><code>visit</code>: which is the entry point for the evaluation of each (appropriate) source code node in the input program. Its only parameter is the node currently being visited, in the form of a <code>NodeBinding</code> object, described below. Optionally, any value returned from this visit function (while otherwise ignored) will be logged to the standard output for debugging purposes.</li>
</ol>
<p>The <code>NodeBinding</code> objects can be interacted with using the following methods:</p>
<ul>
<li><code>getValue(name)</code>: the main way to read data from the current node. First, it looks for distinguished keywords (please refer to the declarative method for a complete list), and if it can’t find the reference there, it looks for an arbitrary Graph node attribute with the same name. This method can therefore be used to retrieve both LIM and Graph values.</li>
<li><code>setMetric(name, value)</code>: the pair of <code>getValue</code>, only it writes data instead of retrieving it. It is important to note, though, that it cannot alter any LIM-related data, and can only set attributes in the Graph.</li>
<li><code>getType()</code> / <code>getClass()</code> / <code>getParent()</code>: the same bridge between the logical and type hierarchies that was provided as <code>.type</code>, <code>.class</code> and <code>.parent</code> in the declarative method. Returns another <code>NodeBinding</code> referring to the starting node’s type / class / parent, respectively.</li>
<li><code>traverse(edge, kind, reverse=False)</code>: performs the previously mentioned context switches between nodes by traversing specific edges. <code>kind</code> can be specified if we only want to traverse those kinds of nodes on the other end of the given edges. <code>reverse</code> reverses the direction of the edge traversal, listing the nodes that point to this node by the given edge, not the nodes this node points to.</li>
<li><code>typeEquals(other)</code> / <code>typeSimilar(other)</code>: performs type-related checks. <code>typeEquals</code> is true only if the current node’s type and the type of the <code>other</code> parameter are the same, while <code>typeSimilar</code> is also true if they have some heuristic-based connection. For example, if one is a custom class, and the other is a list containing custom class instances.</li>
<li>equality / inequality checks are overridden for <code>NodeBindings</code>, so identity checks can be performed using the usual <code>==</code> and <code>!=</code> operators.</li>
<li><code>setWarning(name, role, displayName, category, priority, description, children)</code>: sets match results on the Graph. <code>name</code>, <code>role</code>, <code>displayName</code>, <code>category</code>, <code>priority</code>, and <code>description</code> are just the usual metadata accompanying the match, while <code>children</code> is an optional python <code>dict</code> containing the sub-roles of the pattern.</li>
</ul>
<p>For an example of sub-roles, consider the <a href="https://sourcemaking.com/design_patterns/composite">Composite</a> pattern, where we might want to indicate the Component and Leaf participants of the pattern as well. In this case, we might call <code>setWarning</code> something like this:</p>
<pre class="py"><code>node.setWarning('Composite', 'Composite', 'Composite', 'DesignPattern', 'Minor', 'lorem ipsum', {
  'Component': component_node,
  'Leaf': [leaf_node_1, leaf_node_2]
})</code></pre>
<p>According to the above, sub-roles can be individual nodes or node lists, which will refer back to the original pattern match.</p>
<h3 id="predefined-design-patterns">Predefined Design patterns</h3>
<p>The SourceMeter tool comes with a catalogue of predefined design patterns, listed below.</p>
<h4 id="abstract-factory"><a href="https://sourcemaking.com/design_patterns/abstract_factory"><strong>Abstract Factory</strong></a></h4>
<p>A pattern that provides an interface for creating families of related or dependent objects without specifying their concrete classes.</p>
<p><strong>Interpreted as</strong>: a stateless abstract class with at least two abstract methods, both of which return an abstract type. Furthermore, we check the existence of at least two derived classes that implement those two abstract methods of the base class, and instantiate concrete objects <em>derived</em> from original return types. The former condition (two or more abstract methods) refers to the “families of related objects” part, while the latter (instantiation of derived objects instead of the original return values) is the characteristic of factories.</p>
<h4 id="adapter"><a href="https://sourcemaking.com/design_patterns/adapter"><strong>Adapter</strong></a></h4>
<p>A pattern acting as a wrapper between two objects, catching calls for one object and transforming them to a format and interface recognizable by the second object.</p>
<p><strong>Interpreted as</strong>: a class that meets all three of the following conditions:</p>
<ul>
<li>it implements an interface (showing that it is trying to adapt <em>to</em> something),</li>
<li>it contains a class-type attribute that does <strong>not</strong> implement the same interface (showing that it is trying to adapt <em>from</em> something), and</li>
<li>it has a constructor with the adaptee’s type (showing that it is created by wrapping something).</li>
</ul>
<h4 id="bridge"><a href="https://sourcemaking.com/design_patterns/bridge"><strong>Bridge</strong></a></h4>
<p>A pattern that decouples an abstraction from its implementation so that the two can vary independently. It represents the connection of two different inheritance hierarchies through composition.</p>
<p><strong>Interpreted as</strong>: the head of the first class hierarchy (so at least two child classes for interfaces, or one child for instantiable classes), where:</p>
<ul>
<li>it has a private attribute referencing the head of the second, different hierarchy (again, with at least two child classes for interfaces, or one child for instantiable classes), and</li>
<li>a contructor and at least one “normal” method that uses this attribute.</li>
</ul>
<h4 id="builder"><a href="https://sourcemaking.com/design_patterns/builder"><strong>Builder</strong></a></h4>
<p>A pattern that separates the construction of a complex object from its representation so that the same construction process can create different representations.</p>
<p><strong>Interpreted as</strong>: an abstract class that meets all of the following conditions:</p>
<ul>
<li>doesn’t have any attributes,</li>
<li>has at least two abstract methods,</li>
<li>has at least one child class containing a “build” method (that returns a private attribute) and “reset” method (whose name is checked semantically), and</li>
<li>is used in a “Director” class, where
<ul>
<li>it’s a private attribute,</li>
<li>used by at least two different methods, and</li>
<li>the different methods access it a different amount of times.</li>
</ul></li>
</ul>
<h4 id="chain-of-responsibility"><a href="https://sourcemaking.com/design_patterns/chain_of_responsibility"><strong>Chain of Responsibility</strong></a></h4>
<p>A pattern that makes it possible to avoid coupling the sender of a request to its receiver by giving more than one object a chance to handle the request. It “chains” the receiving objects and passes the request along the chain until an object handles it.</p>
<p><strong>Interpreted as</strong>: an abstact class that satisfies all of the following conditions:</p>
<ul>
<li>contains a private attribute with its own type (referring to the next handler in the chain),</li>
<li>has a setter for this attribute,</li>
<li>can recursively call itself on this private attribute, and</li>
<li>it has at least two child classes that override the specific handling logic.</li>
</ul>
<h4 id="composite"><a href="https://sourcemaking.com/design_patterns/composite"><strong>Composite</strong></a></h4>
<p>A pattern that composes objects into tree structures to represent whole-part hierarchies. Composite lets clients treat individual objects and compositions of objects uniformly.</p>
<p><strong>Interpreted as</strong>: an abstract class or interface (called Component) that has multiple child classes, at least one of which contains a private attribute of the Component’s type.</p>
<!-- missing, TODO!
- [**Factory Method**](https://sourcemaking.com/design_patterns/factory_method)
a pattern that defines an interface for creating an object, but lets subclasses decide which concrete class to instantiate. Factory Method lets a class defer instantiation to subclasses. 

  **Interpreted as**: TODO. -->
<h4 id="object-pool"><a href="https://sourcemaking.com/design_patterns/object_pool"><strong>Object Pool</strong></a></h4>
<p>A pattern that can offer a significant performance boost in situations where 1) the cost of initializing a class instance is high, 2) the rate of instantiation of a class is high, and 3) the number of instantiations in use at any one time is low. It achieves this by maintaining a limited pool of reusable instances.</p>
<p><strong>Interpreted as</strong>: a class that satisfies all of the following conditions:</p>
<ul>
<li>has at least one attribute (referencing the object pool itself),</li>
<li>all of its attributes are private (so that we’re forced to use the sharing interface),</li>
<li>has at least five methods (related to the getting/releasing/capacity settings of the pool),</li>
<li>and extends the Singleton requirements (private constructor, public static instance getter).</li>
</ul>
<h4 id="prototype"><a href="https://sourcemaking.com/design_patterns/prototype"><strong>Prototype</strong></a></h4>
<p>A pattern that specifies the kinds of objects to create by using a prototypical instance, and creates new objects by copying this prototype.</p>
<p><strong>Interpreted as</strong>: a class that has a virtual cloning/copying method (according to its naming convention) that returns its own type, and at least one child class that overrides this method with a covariant return type.</p>
<h4 id="singleton"><a href="https://sourcemaking.com/design_patterns/singleton"><strong>Singleton</strong></a></h4>
<p>A pattern that ensures that a class has only one instance, and provides a global point of access to it, thereby achieving lazy (or “just-in-time”) initialization.</p>
<p><strong>Interpreted as</strong>: a class that safisfies all three of the following conditions:</p>
<ul>
<li>it only has private constructors, thereby making it impossible for users to instantiate normally,</li>
<li>it has a private, static field of its own type (supposedly containing the single instance everyone shares), and</li>
<li>it has a public, static getter method that accesses the instance attribute and returns its type.</li>
</ul>
<h3 id="predefined-anti-patterns">Predefined Anti patterns</h3>
<p>The SourceMeter tool comes with a catalogue of predefined antipatterns, listed below.</p>
<h4 id="feature-envy"><a href="https://sourcemaking.com/refactoring/smells/feature-envy"><strong>Feature Envy</strong></a></h4>
<p>Happens when a method accesses the data of another object more than its own data.</p>
<p><strong>Interpreted as</strong>: a class that accesses at least 5 attributes, and the ratio of foreign attributes among these (as opposed to local ones) exceeds 80%.</p>
<!-- currently disabled
#### [**Lava Flow**](https://sourcemaking.com/antipatterns/lava-flow)
dead code and forgotten design information that is frozen in an ever-changing design. This is analogous to a Lava Flow with hardening globules of rocky material. The refactored solution includes a configuration management process that eliminates dead code and evolves or refactors design toward increasing quality.

  **Interpreted as**: a class that has statically unreferenced methods or attributes.
-->
<!-- currently disabled
#### [**Lazy Class**](https://sourcemaking.com/refactoring/smells/lazy-class)
A class that is (or became) too small and inactive to merit the attention and maintenance energy it demands simply by existing. Usually, its only functionality is delegating tasks to other classes.

  **Interpreted as**: a class whose CBO metric is at least 5 (signaling that it is tightly coupled to many classes) and whose WMC metric is at most 10 (signaling that it doesn't perform any complex logic itself).
-->
<h4 id="long-method"><a href="https://sourcemaking.com/refactoring/smells/long-method"><strong>Long Method</strong></a></h4>
<p>A method that contains too many lines of code or is too complex (and therefore should be broken up into more manageable pieces).</p>
<p><strong>Interpreted as</strong>: a function or method where either of the following three conditions are met:</p>
<ul>
<li>logical lines of code exceed 80,</li>
<li>number of statements exceeds 80, or</li>
<li>the McCabe complexity exceeds 10.</li>
</ul>
<h4 id="long-parameter-list"><a href="https://sourcemaking.com/refactoring/smells/long-parameter-list"><strong>Long Parameter List</strong></a></h4>
<p>A method that has too many parameters, usually signaling that multiple algorithms have been merged, or that subsets of the parameter list should be encapsulated into their own class.</p>
<p><strong>Interpreted as</strong>: a method that has more than 6 parameters.</p>
<!-- currently disabled
#### [**Poltergeist**](https://sourcemaking.com/antipatterns/poltergeists)
a class with limited responsibilities and roles to play in the system. Poltergeists clutter software designs, creating unnecessary abstractions; they are excessively complex, hard to understand, and hard to maintain. They usually manifest by just calling other class' functionalities without representing a standalone object themselves.

  **Interpreted as**: A non-interface class that does not have any attributes.
-->
<h4 id="refused-bequest"><a href="https://sourcemaking.com/refactoring/smells/refused-bequest"><strong>Refused Bequest</strong></a></h4>
<p>Happens when a subclass uses only some of the methods and properties it inherited from its parents, which usually signals that inheritance was the incorrect choice of code reuse (and should be replaced with delegation).</p>
<p><strong>Interpreted as</strong>: A class that inherits protected attributes or methods that it doesn’t ever access.</p>
<h4 id="shotgun-surgery"><a href="https://sourcemaking.com/refactoring/smells/shotgun-surgery"><strong>Shotgun Surgery</strong></a></h4>
<p>Happens when making any functionally coherent modification requires that developers make many small changes to many different classes. Usually signals that the class(es) implementing the feature are too closely coupled to other parts of the system.</p>
<p><strong>Interpreted as</strong>: A method that has more than 10 incoming invocation.</p>
<!-- currently disabled
#### [**Temporary Field**](https://sourcemaking.com/refactoring/smells/temporary-field)
A data field (or attribute) that gets a value (and is needed) only under certain circumstances. Outside of these circumstances, it is empty, which usually means that it should be a parameter of the algorithm actually using it.

  **Interpreted as**: an attribute that's used by less than 10% of the class' methods.
-->
<h4 id="the-blob"><a href="https://sourcemaking.com/antipatterns/the-blob"><strong>The Blob</strong></a></h4>
<p>Also known as God Class or Large Class Code, the blob is a class that monopolizes the processing, while other classes primarily encapsulate data only. It is a thin layer of object orientation to hide a design philosophy that is essentially still procedural.</p>
<p><strong>Interpreted as</strong>: a class where:</p>
<ul>
<li>the combined number of methods and attributes exceeds 60, or</li>
<li>the logical lines of source code exceed 1000. # Footnotes</li>
</ul>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>POSIX Extended Regular Expressions<a href="#fnref1">↩</a></p></li>
</ol>
</section>
</body>
</html>
